<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>STA 3311 Sports Analytics II - 1&nbsp; Intro to Data Manipulation with dplyr</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./02_Stringr.html" rel="next">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link rel="stylesheet" href="webex.css">
</head>
<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./01_Intro.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Intro to Data Manipulation with `dplyr`</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./"></a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_Intro.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Intro to Data Manipulation with <code>dplyr</code></span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_Stringr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">String, Dates, and Joins</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_Tidymodels.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introduction to Tidymodels</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_Regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Linear Regression with Regularization</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_Logistic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Logistic Regression with Regularization</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06_Mixed.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Mixed Effects Models</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07_Data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Obtaining Sport Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08_Web.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Web Scraping with Rvest</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09_ML.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Introduction to Machine Learning</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10_Random.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Random Forests</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11_Spatial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Visualization of Player Tracking Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12_knn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">K-Nearest Neighbors</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13_clustering.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Clustering</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14_dimension.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Dimensionality Reduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15_SVM.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Support Vector Machines</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16_DBSCAN.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">DBSCAN</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17_MLP.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Multi-Layer Perceptron</span></span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li>
<a href="#using-mutate-to-add-or-transform-variables" id="toc-using-mutate-to-add-or-transform-variables" class="nav-link active" data-scroll-target="#using-mutate-to-add-or-transform-variables"><span class="header-section-number">1.1</span> Using <code>mutate()</code> to Add or Transform Variables</a>
  <ul class="collapse">
<li><a href="#syntax" id="toc-syntax" class="nav-link" data-scroll-target="#syntax"><span class="header-section-number">1.1.1</span> Syntax</a></li>
  <li><a href="#why-use-mutate" id="toc-why-use-mutate" class="nav-link" data-scroll-target="#why-use-mutate"><span class="header-section-number">1.1.2</span> Why Use <code>mutate()</code>?</a></li>
  <li><a href="#handling-missing-values-with-mutate" id="toc-handling-missing-values-with-mutate" class="nav-link" data-scroll-target="#handling-missing-values-with-mutate"><span class="header-section-number">1.1.3</span> Handling Missing Values with <code>mutate()</code></a></li>
  <li><a href="#multiple-transformations-with-mutate" id="toc-multiple-transformations-with-mutate" class="nav-link" data-scroll-target="#multiple-transformations-with-mutate"><span class="header-section-number">1.1.4</span> Multiple Transformations with <code>mutate()</code></a></li>
  </ul>
</li>
  <li>
<a href="#using-select-to-choose-variables" id="toc-using-select-to-choose-variables" class="nav-link" data-scroll-target="#using-select-to-choose-variables"><span class="header-section-number">1.2</span> Using <code>select()</code> to Choose Variables</a>
  <ul class="collapse">
<li><a href="#syntax-1" id="toc-syntax-1" class="nav-link" data-scroll-target="#syntax-1"><span class="header-section-number">1.2.1</span> Syntax</a></li>
  <li><a href="#why-use-select" id="toc-why-use-select" class="nav-link" data-scroll-target="#why-use-select"><span class="header-section-number">1.2.2</span> Why Use <code>select()</code>?</a></li>
  <li><a href="#selecting-columns-by-range" id="toc-selecting-columns-by-range" class="nav-link" data-scroll-target="#selecting-columns-by-range"><span class="header-section-number">1.2.3</span> Selecting Columns by Range</a></li>
  <li><a href="#dropping-columns" id="toc-dropping-columns" class="nav-link" data-scroll-target="#dropping-columns"><span class="header-section-number">1.2.4</span> Dropping Columns</a></li>
  <li><a href="#using-helper-functions-with-select" id="toc-using-helper-functions-with-select" class="nav-link" data-scroll-target="#using-helper-functions-with-select"><span class="header-section-number">1.2.5</span> Using Helper Functions with <code>select()</code></a></li>
  </ul>
</li>
  <li>
<a href="#using-filter-to-subset-the-data" id="toc-using-filter-to-subset-the-data" class="nav-link" data-scroll-target="#using-filter-to-subset-the-data"><span class="header-section-number">1.3</span> Using <code>filter()</code> to Subset the Data</a>
  <ul class="collapse">
<li><a href="#syntax-2" id="toc-syntax-2" class="nav-link" data-scroll-target="#syntax-2"><span class="header-section-number">1.3.1</span> Syntax</a></li>
  <li><a href="#why-use-filter" id="toc-why-use-filter" class="nav-link" data-scroll-target="#why-use-filter"><span class="header-section-number">1.3.2</span> Why Use <code>filter()</code>?</a></li>
  <li><a href="#filtering-on-multiple-conditions" id="toc-filtering-on-multiple-conditions" class="nav-link" data-scroll-target="#filtering-on-multiple-conditions"><span class="header-section-number">1.3.3</span> Filtering on Multiple Conditions</a></li>
  <li><a href="#filtering-with-logical-operators" id="toc-filtering-with-logical-operators" class="nav-link" data-scroll-target="#filtering-with-logical-operators"><span class="header-section-number">1.3.4</span> Filtering with Logical Operators</a></li>
  <li><a href="#using-in-to-filter-by-a-set-of-values" id="toc-using-in-to-filter-by-a-set-of-values" class="nav-link" data-scroll-target="#using-in-to-filter-by-a-set-of-values"><span class="header-section-number">1.3.5</span> Using <code>%in%</code> to Filter by a Set of Values</a></li>
  <li><a href="#filtering-missing-data" id="toc-filtering-missing-data" class="nav-link" data-scroll-target="#filtering-missing-data"><span class="header-section-number">1.3.6</span> Filtering Missing Data</a></li>
  </ul>
</li>
  <li>
<a href="#using-summarise-to-aggregate-data" id="toc-using-summarise-to-aggregate-data" class="nav-link" data-scroll-target="#using-summarise-to-aggregate-data"><span class="header-section-number">1.4</span> Using <code>summarise()</code> to Aggregate Data</a>
  <ul class="collapse">
<li><a href="#syntax-3" id="toc-syntax-3" class="nav-link" data-scroll-target="#syntax-3"><span class="header-section-number">1.4.1</span> Syntax</a></li>
  <li><a href="#why-use-summarise" id="toc-why-use-summarise" class="nav-link" data-scroll-target="#why-use-summarise"><span class="header-section-number">1.4.2</span> Why Use <code>summarise()</code>?</a></li>
  <li><a href="#grouping-data-before-summarizing" id="toc-grouping-data-before-summarizing" class="nav-link" data-scroll-target="#grouping-data-before-summarizing"><span class="header-section-number">1.4.3</span> Grouping Data Before Summarizing</a></li>
  <li><a href="#adding-summary-statistics-to-the-original-data" id="toc-adding-summary-statistics-to-the-original-data" class="nav-link" data-scroll-target="#adding-summary-statistics-to-the-original-data"><span class="header-section-number">1.4.4</span> Adding Summary Statistics to the Original Data</a></li>
  </ul>
</li>
  <li>
<a href="#using-arrange-to-order-rows" id="toc-using-arrange-to-order-rows" class="nav-link" data-scroll-target="#using-arrange-to-order-rows"><span class="header-section-number">1.5</span> Using <code>arrange()</code> to Order Rows</a>
  <ul class="collapse">
<li><a href="#syntax-4" id="toc-syntax-4" class="nav-link" data-scroll-target="#syntax-4"><span class="header-section-number">1.5.1</span> Syntax</a></li>
  <li><a href="#why-use-arrange" id="toc-why-use-arrange" class="nav-link" data-scroll-target="#why-use-arrange"><span class="header-section-number">1.5.2</span> Why Use <code>arrange()</code>?</a></li>
  <li><a href="#arranging-by-multiple-variables" id="toc-arranging-by-multiple-variables" class="nav-link" data-scroll-target="#arranging-by-multiple-variables"><span class="header-section-number">1.5.3</span> Arranging by Multiple Variables</a></li>
  <li><a href="#sorting-chronologically" id="toc-sorting-chronologically" class="nav-link" data-scroll-target="#sorting-chronologically"><span class="header-section-number">1.5.4</span> Sorting Chronologically</a></li>
  </ul>
</li>
  <li><a href="#concept-quiz" id="toc-concept-quiz" class="nav-link" data-scroll-target="#concept-quiz"><span class="header-section-number">1.6</span> Concept Quiz</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">
<span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Intro to Data Manipulation with <code>dplyr</code></span>
</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><blockquote class="blockquote">
<p>“I’ve missed more than 9000 shots in my career. I’ve lost almost 300 games. 26 times, I’ve been trusted to take the game winning shot and missed. I’ve failed over and over and over again in my life. And that is why I succeed.” - Michael Jordan</p>
</blockquote>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="pics/jordan1.gif" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Michael Jordan hits the game winner over Craig Ehlo during Game 5 of a 1989 playoff series.</figcaption></figure>
</div>
<!-- ::: {.content-visible when-format="pdf"} -->
<!-- ![Frames from an animation of a tesseract, a cube changing over time. This appears as a true animation in the online version. -->
<!-- ](https://placeholder.co/400){#fig-tesseract} -->
<!-- ::: -->
<p>In sports analytics, one of the first steps in understanding and analyzing data is manipulation—transforming raw data into a form suitable for analysis. The ability to manipulate data efficiently is vital for uncovering insights in sports, such as analyzing player statistics, team performance, and game outcomes.</p>
<p>In this chapter, we introduce <code>dplyr</code>, a powerful R package designed for data manipulation. <code>dplyr</code> allows you to perform a range of common data wrangling tasks in a clear, concise, and readable way. Using <code>dplyr</code> functions, you can filter observations, select variables, compute summaries, and transform datasets. These operations will form the foundation for more advanced analyses in later chapters.</p>
<p>The <code>dplyr</code> package provides several key functions for manipulating data: - <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> to add new variables or transform existing ones. - <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> to choose specific columns of data. - <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> to subset the data based on conditions. - <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> to aggregate data. - <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> to reorder rows of data.</p>
<p>In this chapter, we will explore each of these functions in detail using sports data from the <code>Lahman</code> package, a commonly used dataset in sports analytics. The <code>Lahman</code> package includes historical Major League Baseball (MLB) data, such as player statistics, team performance, and other key metrics.</p>
<section id="using-mutate-to-add-or-transform-variables" class="level2" data-number="1.1"><h2 data-number="1.1" class="anchored" data-anchor-id="using-mutate-to-add-or-transform-variables">
<span class="header-section-number">1.1</span> Using <code>mutate()</code> to Add or Transform Variables</h2>
<p>The <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> function in <code>dplyr</code> is an essential tool for creating new variables or modifying existing ones in a dataset. In the context of sports analytics, this function is particularly useful when you want to compute new metrics or adjust raw data into more meaningful forms. For example, a player’s raw performance statistics, such as hits or points scored, can be transformed into ratios or averages, providing more insightful performance measures such as batting averages or efficiency ratings.</p>
<section id="syntax" class="level3" data-number="1.1.1"><h3 data-number="1.1.1" class="anchored" data-anchor-id="syntax">
<span class="header-section-number">1.1.1</span> Syntax</h3>
<p>The basic syntax of <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> is as follows:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">mutate</span><span class="op">(</span><span class="va">data</span>, new_variable <span class="op">=</span> <span class="va">expression</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here, <code>data</code> is the name of the dataset you are working with, <code>new_variable</code> is the name of the variable you are adding or modifying, and <code>expression</code> is the formula used to calculate the value of the new variable.</p>
<p>We can also use the pipe operator as follows:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data</span> <span class="op">|&gt;</span> </span>
<span><span class="fu">mutate</span><span class="op">(</span>new_variable <span class="op">=</span> <span class="va">expression</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section><section id="why-use-mutate" class="level3" data-number="1.1.2"><h3 data-number="1.1.2" class="anchored" data-anchor-id="why-use-mutate">
<span class="header-section-number">1.1.2</span> Why Use <code>mutate()</code>?</h3>
<p>In sports analytics, it is often necessary to create variables that represent metrics or statistics derived from existing data. For example:</p>
<ul>
<li>Creating a new variable that represents a player’s scoring efficiency.</li>
<li>Calculating a team’s win rate by dividing the number of wins by the total number of games played.</li>
<li>Computing advanced metrics such as player efficiency rating (PER) in basketball or on-base plus slugging (OPS) in baseball.</li>
</ul>
<p>By transforming raw data into meaningful statistics, you can uncover new insights that are not immediately apparent in the original dataset.</p>
<div id="exm-01_01" class="theorem example">
<p><span class="theorem-title"><strong>Example 1.1 (Calculating Batting Average) </strong></span>Let’s begin with a basic example using data from the <code>Lahman</code> package, which contains Major League Baseball (MLB) statistics. We will calculate each player’s batting average (BA), a widely used performance metric that represents the ratio of a player’s hits (<code>H</code>) to at-bats (<code>AB</code>).</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://CRAN.R-project.org/package=Lahman">Lahman</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Example: Adding Batting Average (BA) to Batting data</span></span>
<span><span class="va">batting_data</span> <span class="op">=</span> <span class="va">Batting</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>BA <span class="op">=</span> <span class="va">H</span> <span class="op">/</span> <span class="va">AB</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">batting_data</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   playerID yearID stint teamID lgID  G AB R H X2B X3B HR RBI SB CS BB SO IBB
1 aardsda01   2004     1    SFN   NL 11  0 0 0   0   0  0   0  0  0  0  0   0
2 aardsda01   2006     1    CHN   NL 45  2 0 0   0   0  0   0  0  0  0  0   0
3 aardsda01   2007     1    CHA   AL 25  0 0 0   0   0  0   0  0  0  0  0   0
4 aardsda01   2008     1    BOS   AL 47  1 0 0   0   0  0   0  0  0  0  1   0
5 aardsda01   2009     1    SEA   AL 73  0 0 0   0   0  0   0  0  0  0  0   0
6 aardsda01   2010     1    SEA   AL 53  0 0 0   0   0  0   0  0  0  0  0   0
  HBP SH SF GIDP  BA
1   0  0  0    0 NaN
2   0  1  0    0   0
3   0  0  0    0 NaN
4   0  0  0    0   0
5   0  0  0    0 NaN
6   0  0  0    0 NaN</code></pre>
</div>
</div>
<p>In this example, we use <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> to create a new variable <code>BA</code>, which stores the batting average for each player. This new column is derived from dividing the number of hits (<code>H</code>) by the number of at-bats (<code>AB</code>).</p>
</div>
</section><section id="handling-missing-values-with-mutate" class="level3" data-number="1.1.3"><h3 data-number="1.1.3" class="anchored" data-anchor-id="handling-missing-values-with-mutate">
<span class="header-section-number">1.1.3</span> Handling Missing Values with <code>mutate()</code>
</h3>
<p>In some cases, you may encounter missing or undefined values in your dataset. When using <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> to create new variables, it’s important to handle these missing values to avoid errors or incorrect calculations. In R, you can use the <code>na.rm = TRUE</code> argument in relevant functions (like <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> or <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code>) to remove missing values before performing calculations.</p>
<div id="exm-01_02" class="theorem example">
<p><span class="theorem-title"><strong>Example 1.2 (Handling division by zero) </strong></span>Let’s modify the batting average calculation to handle cases where the number of at-bats (<code>AB</code>) is zero, which would otherwise lead to a division by zero error.</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting_data</span> <span class="op">=</span> <span class="va">Batting</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>BA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">AB</span> <span class="op">==</span> <span class="fl">0</span>, <span class="cn">NA</span>, <span class="va">H</span> <span class="op">/</span> <span class="va">AB</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">batting_data</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   playerID yearID stint teamID lgID  G AB R H X2B X3B HR RBI SB CS BB SO IBB
1 aardsda01   2004     1    SFN   NL 11  0 0 0   0   0  0   0  0  0  0  0   0
2 aardsda01   2006     1    CHN   NL 45  2 0 0   0   0  0   0  0  0  0  0   0
3 aardsda01   2007     1    CHA   AL 25  0 0 0   0   0  0   0  0  0  0  0   0
4 aardsda01   2008     1    BOS   AL 47  1 0 0   0   0  0   0  0  0  0  1   0
5 aardsda01   2009     1    SEA   AL 73  0 0 0   0   0  0   0  0  0  0  0   0
6 aardsda01   2010     1    SEA   AL 53  0 0 0   0   0  0   0  0  0  0  0   0
  HBP SH SF GIDP BA
1   0  0  0    0 NA
2   0  1  0    0  0
3   0  0  0    0 NA
4   0  0  0    0  0
5   0  0  0    0 NA
6   0  0  0    0 NA</code></pre>
</div>
</div>
<p>In this case, we use <code><a href="https://rdrr.io/r/base/ifelse.html">ifelse()</a></code> to check if a player has zero at-bats (<code>AB == 0</code>). If this condition is met, we assign a missing value (<code>NA</code>) to the batting average, otherwise, the batting average is calculated as usual.</p>
</div>
</section><section id="multiple-transformations-with-mutate" class="level3" data-number="1.1.4"><h3 data-number="1.1.4" class="anchored" data-anchor-id="multiple-transformations-with-mutate">
<span class="header-section-number">1.1.4</span> Multiple Transformations with <code>mutate()</code>
</h3>
<p>The <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> function can be used to perform multiple transformations in a single call. This is useful when you need to create several new variables based on existing data. You can also overwrite existing variables if needed.</p>
<div id="exm-01-03" class="theorem example">
<p><span class="theorem-title"><strong>Example 1.3 (Performing multiple transformations with <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>) </strong></span>&nbsp;</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting_data</span> <span class="op">=</span> <span class="va">Batting</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>BA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">AB</span> <span class="op">==</span> <span class="fl">0</span>, <span class="cn">NA</span>, <span class="va">H</span> <span class="op">/</span> <span class="va">AB</span><span class="op">)</span>,</span>
<span>         OBP <span class="op">=</span> <span class="op">(</span><span class="va">H</span> <span class="op">+</span> <span class="va">BB</span> <span class="op">+</span> <span class="va">HBP</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="va">AB</span> <span class="op">+</span> <span class="va">BB</span> <span class="op">+</span> <span class="va">SF</span> <span class="op">+</span> <span class="va">HBP</span><span class="op">)</span>,</span>
<span>         SLG <span class="op">=</span> <span class="op">(</span><span class="va">H</span> <span class="op">-</span> <span class="va">X2B</span> <span class="op">-</span> <span class="va">X3B</span> <span class="op">-</span> <span class="va">HR</span> <span class="op">+</span> <span class="fl">2</span><span class="op">*</span><span class="va">X2B</span> <span class="op">+</span> <span class="fl">3</span><span class="op">*</span><span class="va">X3B</span> <span class="op">+</span> <span class="fl">4</span><span class="op">*</span><span class="va">HR</span><span class="op">)</span> <span class="op">/</span> <span class="va">AB</span>, </span>
<span>         OPS <span class="op">=</span> <span class="va">OBP</span> <span class="op">+</span> <span class="va">SLG</span></span>
<span>         <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In this example, we calculate several new statistics—batting average (<code>BA</code>), on-base percentage (<code>OBP</code>), slugging percentage (<code>SLG</code>), and On-base Plus Slugging (<code>OPS</code>)—all within the same <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> call.</p>
</div>
<p>The <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> function is a versatile and powerful tool for creating new variables and transforming existing ones. In sports analytics, this ability is invaluable when calculating advanced statistics that provide deeper insights into player and team performance. Whether you’re calculating simple metrics like batting averages or more complex statistics like on-base plus slugging, <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> allows you to efficiently manipulate and analyze your data. In the next sections, we will explore additional dplyr functions that complement <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>, such as <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code>, and <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code>.</p>
</section></section><section id="using-select-to-choose-variables" class="level2" data-number="1.2"><h2 data-number="1.2" class="anchored" data-anchor-id="using-select-to-choose-variables">
<span class="header-section-number">1.2</span> Using <code>select()</code> to Choose Variables</h2>
<p>The <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> function in <code>dplyr</code> is a powerful tool for selecting specific columns (or variables) from a dataset. In sports analytics, datasets can contain a large number of variables, many of which may not be immediately relevant to your analysis. By using <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>, you can streamline your workflow, focusing on only the columns that are essential for the task at hand.</p>
<p>The function allows you to extract specific columns based on their names, making the data more manageable and readable, especially when you’re working with large datasets like those from the NBA, MLB, or other sports leagues.</p>
<section id="syntax-1" class="level3" data-number="1.2.1"><h3 data-number="1.2.1" class="anchored" data-anchor-id="syntax-1">
<span class="header-section-number">1.2.1</span> Syntax</h3>
<p>The basic syntax of <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> is as follows:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">column1</span>, <span class="va">column2</span>, <span class="va">...</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here, <code>data</code> is the name of the dataset, and <code>column1</code>, <code>column2</code>, etc., represent the columns you wish to select from the dataset.</p>
</section><section id="why-use-select" class="level3" data-number="1.2.2"><h3 data-number="1.2.2" class="anchored" data-anchor-id="why-use-select">
<span class="header-section-number">1.2.2</span> Why Use <code>select()</code>?</h3>
<p>In sports analytics, it is common to work with large datasets that contain numerous variables, such as player names, performance metrics, team information, game statistics, and more. Often, you only need a few of these columns for a specific analysis. By using <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>, you can focus on the relevant variables, simplifying your data and improving performance when working with large datasets.</p>
<p>For example:</p>
<ul>
<li>Selecting player performance statistics such as points, assists, and rebounds.</li>
<li>Narrowing down a dataset to include only specific game information, such as game date, team, and score.</li>
<li>Choosing variables that represent team-level statistics over a season, like win totals or offensive efficiency.</li>
</ul>
<div id="exm-01_04" class="theorem example">
<p><span class="theorem-title"><strong>Example 1.4 (Selecting Key Batting Statistics) </strong></span>Let’s use the <code>Lahman</code> dataset again, which contains a wealth of baseball statistics. Suppose we are only interested in a few key batting statistics, such as player ID (<code>playerID</code>), year (<code>yearID</code>), at-bats (<code>AB</code>), hits (<code>H</code>), and home runs (<code>HR</code>). We can use <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> to extract these columns:</p>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://CRAN.R-project.org/package=Lahman">Lahman</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">batting_data_selected</span> <span class="op">=</span> <span class="va">Batting</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">playerID</span>, <span class="va">yearID</span>, <span class="va">AB</span>, <span class="va">H</span>, <span class="va">HR</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">batting_data_selected</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   playerID yearID AB H HR
1 aardsda01   2004  0 0  0
2 aardsda01   2006  2 0  0
3 aardsda01   2007  0 0  0
4 aardsda01   2008  1 0  0
5 aardsda01   2009  0 0  0
6 aardsda01   2010  0 0  0</code></pre>
</div>
</div>
<p>In this example, the <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> function filters the dataset down to just the columns <code>playerID</code>, <code>yearID</code>, <code>AB</code>, <code>H</code>, and <code>HR</code>. This is especially useful when you’re conducting specific analyses on player performance metrics like at-bats (AB), hits (H), and home runs (HR).</p>
</div>
</section><section id="selecting-columns-by-range" class="level3" data-number="1.2.3"><h3 data-number="1.2.3" class="anchored" data-anchor-id="selecting-columns-by-range">
<span class="header-section-number">1.2.3</span> Selecting Columns by Range</h3>
<p>You can also select columns by specifying a range using the colon (<code>:</code>) operator. This is helpful when dealing with consecutive columns that you wish to include in your analysis.</p>
<div id="exm-01_05" class="theorem example">
<p><span class="theorem-title"><strong>Example 1.5 (Selecting a range of columns) </strong></span>Let’s say you want to select all the columns between <code>AB</code> and <code>HR</code> in the batting dataset.</p>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting_data_range</span> <span class="op">=</span> <span class="va">Batting</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">AB</span><span class="op">:</span><span class="va">HR</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">batting_data_range</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  AB R H X2B X3B HR
1  0 0 0   0   0  0
2  2 0 0   0   0  0
3  0 0 0   0   0  0
4  1 0 0   0   0  0
5  0 0 0   0   0  0
6  0 0 0   0   0  0</code></pre>
</div>
</div>
<p>In this example, the <code>select(AB:HR)</code> syntax selects all columns from <code>AB</code> to <code>HR</code> inclusively. This feature is handy when you want to work with a block of consecutive columns.</p>
</div>
</section><section id="dropping-columns" class="level3" data-number="1.2.4"><h3 data-number="1.2.4" class="anchored" data-anchor-id="dropping-columns">
<span class="header-section-number">1.2.4</span> Dropping Columns</h3>
<p>In some cases, you might want to exclude certain columns from your dataset rather than select specific ones. You can do this using the <code>-</code> sign in combination with <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> to drop unwanted columns.</p>
<div id="exm-01_06" class="theorem example">
<p><span class="theorem-title"><strong>Example 1.6 (Dropping a specific column) </strong></span>Let’s say you want to keep all columns except for the player’s ID (<code>playerID</code>).</p>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting_data_dropped</span> <span class="op">=</span> <span class="va">Batting</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">playerID</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">batting_data_dropped</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  yearID stint teamID lgID  G AB R H X2B X3B HR RBI SB CS BB SO IBB HBP SH SF
1   2004     1    SFN   NL 11  0 0 0   0   0  0   0  0  0  0  0   0   0  0  0
2   2006     1    CHN   NL 45  2 0 0   0   0  0   0  0  0  0  0   0   0  1  0
3   2007     1    CHA   AL 25  0 0 0   0   0  0   0  0  0  0  0   0   0  0  0
4   2008     1    BOS   AL 47  1 0 0   0   0  0   0  0  0  0  1   0   0  0  0
5   2009     1    SEA   AL 73  0 0 0   0   0  0   0  0  0  0  0   0   0  0  0
6   2010     1    SEA   AL 53  0 0 0   0   0  0   0  0  0  0  0   0   0  0  0
  GIDP
1    0
2    0
3    0
4    0
5    0
6    0</code></pre>
</div>
</div>
<p>Here, <code>select(-playerID)</code> removes the <code>playerID</code> column from the dataset, returning all other columns. This is useful when you want to retain most of the dataset but exclude a few irrelevant variables.</p>
</div>
</section><section id="using-helper-functions-with-select" class="level3" data-number="1.2.5"><h3 data-number="1.2.5" class="anchored" data-anchor-id="using-helper-functions-with-select">
<span class="header-section-number">1.2.5</span> Using Helper Functions with <code>select()</code>
</h3>
<p><code>dplyr</code> also provides helper functions that allow you to select columns based on certain patterns or criteria. These include:</p>
<ul>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with()</a></code>: Select columns whose names start with a certain prefix.</li>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">ends_with()</a></code>: Select columns whose names end with a certain suffix.</li>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains()</a></code>: Select columns whose names contain a certain string.</li>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">matches()</a></code>: Select columns that match a regular expression.</li>
</ul>
<p>These functions are particularly useful when working with datasets where columns follow a naming convention, such as stats that begin with “player_” or end with “_rate.”</p>
<div id="exm-01_07" class="theorem example">
<p><span class="theorem-title"><strong>Example 1.7 (Selecting Columns that Start with a Prefix) </strong></span>Suppose you are working with a basketball dataset and want to select all statistics related to shooting that start with <code>field_goals</code>. In this example, we will use the <code>hoopR</code> package in R. This package provide functions for fetching NBA and men’s college basketball data.</p>
<div class="cell">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sportsdataverse/hoopR">hoopR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">#load the data for 2023</span></span>
<span><span class="va">basketball_data</span> <span class="op">=</span> <span class="fu"><a href="https://hoopR.sportsdataverse.org/reference/load_nba_player_box.html">load_nba_player_box</a></span><span class="op">(</span>seasons <span class="op">=</span> <span class="fl">2023</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">shooting_stats</span> <span class="op">=</span> <span class="va">basketball_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"field_goals"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">shooting_stats</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  field_goals_made field_goals_attempted
             &lt;int&gt;                 &lt;int&gt;
1                1                     4
2                5                    18
3                9                    20
4                3                    13
5                5                    12
6                2                     6</code></pre>
</div>
</div>
<p>In this example, <code>select(starts_with("field_goals"))</code> extracts all columns whose names begin with “field_goals,” such as <code>field_goals_made</code>, and <code>field_goals_attempted</code>.</p>
</div>
<p>The <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> function is a highly flexible tool for extracting relevant columns from large datasets, making it easier to work with and analyze the data that matters most. Whether you’re working with baseball, basketball, or any other sport, <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> can streamline your workflow, helping you focus on the specific variables that are critical to your analysis. By combining <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> with helper functions, such as <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">ends_with()</a></code>, and others, you can perform more advanced selections based on patterns or column names, further enhancing your ability to manipulate sports data.</p>
<p>In the next section, we’ll explore how to subset your data using <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> to focus on specific cases or observations based on conditions, such as selecting players above a certain performance threshold.</p>
</section></section><section id="using-filter-to-subset-the-data" class="level2" data-number="1.3"><h2 data-number="1.3" class="anchored" data-anchor-id="using-filter-to-subset-the-data">
<span class="header-section-number">1.3</span> Using <code>filter()</code> to Subset the Data</h2>
<p>The <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> function in <code>dplyr</code> is used to subset rows in a dataset based on specified conditions. This function allows you to extract observations that meet certain criteria, which is crucial in sports analytics when you need to focus on specific players, teams, or events. Whether you’re interested in filtering by player performance, team rankings, or game outcomes, <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> enables you to work with just the relevant data for your analysis.</p>
<section id="syntax-2" class="level3" data-number="1.3.1"><h3 data-number="1.3.1" class="anchored" data-anchor-id="syntax-2">
<span class="header-section-number">1.3.1</span> Syntax</h3>
<p>The basic syntax of <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> is as follows:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">condition1</span>, <span class="va">condition2</span>, <span class="va">...</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here, <code>data</code> is the dataset, and <code>condition1</code>, <code>condition2</code>, etc., are the conditions that the rows must meet to be included in the subset. Conditions typically involve logical comparisons, such as <code>&gt;</code>, <code>&lt;</code>, <code>==</code>, <code>!=</code>, and <code>%in%</code>.</p>
</section><section id="why-use-filter" class="level3" data-number="1.3.2"><h3 data-number="1.3.2" class="anchored" data-anchor-id="why-use-filter">
<span class="header-section-number">1.3.2</span> Why Use <code>filter()</code>?</h3>
<p>In sports analytics, datasets often contain a wealth of information about many players, games, or seasons. However, your analysis might focus on a specific subset of this data, such as:</p>
<ul>
<li>Filtering players with more than a certain number of points or minutes played.</li>
<li>Focusing on teams with a winning percentage above a specific threshold.</li>
<li>Subsetting games where a team scored over 100 points.</li>
<li>Isolating data from a particular season, team, or player.</li>
</ul>
<p>By using <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>, you can isolate the rows that are most relevant to your analysis, making it easier to conduct meaningful evaluations or comparisons.</p>
<div id="exm-01_08" class="theorem example">
<p><span class="theorem-title"><strong>Example 1.8 (Filtering Players with More than 200 At-Bats) </strong></span>Let’s return to the <code>Lahman</code> dataset and use <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> to subset players who had more than 200 at-bats in a given season. This kind of filtering is useful when analyzing only those players who had significant playing time.</p>
<div class="cell">
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://CRAN.R-project.org/package=Lahman">Lahman</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">batting_filtered</span> <span class="op">=</span> <span class="va">Batting</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">AB</span> <span class="op">&gt;</span> <span class="fl">200</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">batting_filtered</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   playerID yearID stint teamID lgID   G  AB   R   H X2B X3B HR RBI SB CS BB SO
1 aaronha01   1954     1    ML1   NL 122 468  58 131  27   6 13  69  2  2 28 39
2 aaronha01   1955     1    ML1   NL 153 602 105 189  37   9 27 106  3  1 49 61
3 aaronha01   1956     1    ML1   NL 153 609 106 200  34  14 26  92  2  4 37 54
4 aaronha01   1957     1    ML1   NL 151 615 118 198  27   6 44 132  1  1 57 58
5 aaronha01   1958     1    ML1   NL 153 601 109 196  34   4 30  95  4  1 59 49
6 aaronha01   1959     1    ML1   NL 154 629 116 223  46   7 39 123  8  0 51 54
  IBB HBP SH SF GIDP
1  NA   3  6  4   13
2   5   3  7  4   20
3   6   2  5  7   21
4  15   0  0  3   13
5  16   1  0  3   21
6  17   4  0  9   19</code></pre>
</div>
</div>
<p>In this example, we use <code>filter(AB &gt; 200)</code> to keep only the rows where players had more than 200 at-bats (<code>AB</code>). This ensures that our analysis focuses on players with sufficient playing time, avoiding the inclusion of those who had limited opportunities.</p>
</div>
</section><section id="filtering-on-multiple-conditions" class="level3" data-number="1.3.3"><h3 data-number="1.3.3" class="anchored" data-anchor-id="filtering-on-multiple-conditions">
<span class="header-section-number">1.3.3</span> Filtering on Multiple Conditions</h3>
<p>You can use <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> to apply multiple conditions at once, allowing for more precise subsetting. Multiple conditions can be combined with logical operators such as <code>&amp;</code> (AND) and <code>|</code> (OR).</p>
<div id="exm-01_09" class="theorem example">
<p><span class="theorem-title"><strong>Example 1.9 (Filtering Players with More than 200 At-Bats and More Than 20 Home Runs) </strong></span>&nbsp;</p>
<div class="cell">
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting_filtered_multiple</span> <span class="op">=</span> <span class="va">Batting</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">AB</span> <span class="op">&gt;</span> <span class="fl">200</span> <span class="op">&amp;</span> <span class="va">HR</span> <span class="op">&gt;</span> <span class="fl">20</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">batting_filtered_multiple</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   playerID yearID stint teamID lgID   G  AB   R   H X2B X3B HR RBI SB CS BB SO
1 aaronha01   1955     1    ML1   NL 153 602 105 189  37   9 27 106  3  1 49 61
2 aaronha01   1956     1    ML1   NL 153 609 106 200  34  14 26  92  2  4 37 54
3 aaronha01   1957     1    ML1   NL 151 615 118 198  27   6 44 132  1  1 57 58
4 aaronha01   1958     1    ML1   NL 153 601 109 196  34   4 30  95  4  1 59 49
5 aaronha01   1959     1    ML1   NL 154 629 116 223  46   7 39 123  8  0 51 54
6 aaronha01   1960     1    ML1   NL 153 590 102 172  20  11 40 126 16  7 60 63
  IBB HBP SH SF GIDP
1   5   3  7  4   20
2   6   2  5  7   21
3  15   0  0  3   13
4  16   1  0  3   21
5  17   4  0  9   19
6  13   2  0 12    8</code></pre>
</div>
</div>
<p>Here, we use <code>filter(AB &gt; 200 &amp; HR &gt; 20)</code> to select players who had more than 200 at-bats and also hit more than 20 home runs in a season. This type of filtering is useful for identifying high-performing players who both played regularly and demonstrated power-hitting ability.</p>
</div>
</section><section id="filtering-with-logical-operators" class="level3" data-number="1.3.4"><h3 data-number="1.3.4" class="anchored" data-anchor-id="filtering-with-logical-operators">
<span class="header-section-number">1.3.4</span> Filtering with Logical Operators</h3>
<p>You can apply more complex logical conditions with <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>. For example, if you wanted to find players who either had more than 200 at-bats or hit more than 20 home runs (but not necessarily both), you could use the OR operator <code>|</code>.</p>
<div id="exm-01_10" class="theorem example">
<p><span class="theorem-title"><strong>Example 1.10 (Using OR condition) </strong></span>&nbsp;</p>
<div class="cell">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting_filtered_or</span> <span class="op">=</span> <span class="va">Batting</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">AB</span> <span class="op">&gt;</span> <span class="fl">200</span> <span class="op">|</span> <span class="va">HR</span> <span class="op">&gt;</span> <span class="fl">20</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">batting_filtered_or</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   playerID yearID stint teamID lgID   G  AB   R   H X2B X3B HR RBI SB CS BB SO
1 aaronha01   1954     1    ML1   NL 122 468  58 131  27   6 13  69  2  2 28 39
2 aaronha01   1955     1    ML1   NL 153 602 105 189  37   9 27 106  3  1 49 61
3 aaronha01   1956     1    ML1   NL 153 609 106 200  34  14 26  92  2  4 37 54
4 aaronha01   1957     1    ML1   NL 151 615 118 198  27   6 44 132  1  1 57 58
5 aaronha01   1958     1    ML1   NL 153 601 109 196  34   4 30  95  4  1 59 49
6 aaronha01   1959     1    ML1   NL 154 629 116 223  46   7 39 123  8  0 51 54
  IBB HBP SH SF GIDP
1  NA   3  6  4   13
2   5   3  7  4   20
3   6   2  5  7   21
4  15   0  0  3   13
5  16   1  0  3   21
6  17   4  0  9   19</code></pre>
</div>
</div>
<p>In this example, players are included in the subset if they meet either of the conditions: more than 200 at-bats or more than 20 home runs.</p>
</div>
</section><section id="using-in-to-filter-by-a-set-of-values" class="level3" data-number="1.3.5"><h3 data-number="1.3.5" class="anchored" data-anchor-id="using-in-to-filter-by-a-set-of-values">
<span class="header-section-number">1.3.5</span> Using <code>%in%</code> to Filter by a Set of Values</h3>
<p>The <code>%in%</code> operator can be used within <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> to check whether a column’s values belong to a specific set. This is particularly useful when you want to filter by specific categories, such as player IDs, teams, or years.</p>
<div id="exm-01_11" class="theorem example">
<p><span class="theorem-title"><strong>Example 1.11 (Filtering Data for Specific Years) </strong></span>Let’s say you want to analyze data from only the 2010 and 2015 seasons.</p>
<div class="cell">
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting_filtered_years</span> <span class="op">=</span> <span class="va">Batting</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">yearID</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2010</span>, <span class="fl">2015</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">batting_filtered_years</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   playerID yearID stint teamID lgID   G  AB  R   H X2B X3B HR RBI SB CS BB  SO
1 aardsda01   2010     1    SEA   AL  53   0  0   0   0   0  0   0  0  0  0   0
2 aardsda01   2015     1    ATL   NL  33   1  0   0   0   0  0   0  0  0  0   1
3  abadfe01   2010     1    HOU   NL  22   1  0   0   0   0  0   0  0  0  0   1
4  abadfe01   2015     1    OAK   AL  62   0  0   0   0   0  0   0  0  0  0   0
5 abreubo01   2010     1    LAA   AL 154 573 88 146  41   1 20  78 24 10 87 132
6 abreujo02   2015     1    CHA   AL 154 613 88 178  34   3 30 101  0  0 39 140
  IBB HBP SH SF GIDP
1   0   0  0  0    0
2   0   0  0  0    0
3   0   0  0  0    0
4   0   0  0  0    0
5   3   2  0  5   13
6  11  15  0  1   16</code></pre>
</div>
</div>
<p>In this example, we use <code>filter(yearID %in% c(2010, 2015))</code> to retain only the rows where the <code>yearID</code> column matches 2010 or 2015. This approach is helpful when working with data from specific seasons or games.</p>
</div>
</section><section id="filtering-missing-data" class="level3" data-number="1.3.6"><h3 data-number="1.3.6" class="anchored" data-anchor-id="filtering-missing-data">
<span class="header-section-number">1.3.6</span> Filtering Missing Data</h3>
<p>In many datasets, missing values (represented as <code>NA</code> in R) can cause problems if not handled properly. You can use <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> to exclude rows with missing values or to isolate rows where certain values are missing.</p>
<div id="exm-01_12" class="theorem example">
<p><span class="theorem-title"><strong>Example 1.12 (Filtering Out Missing Data) </strong></span>Let’s filter out rows where the number of at-bats (<code>AB</code>) is missing.</p>
<div class="cell">
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Removing rows with missing values for at-bats</span></span>
<span><span class="va">batting_no_na</span> <span class="op">=</span> <span class="va">Batting</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">AB</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">batting_no_na</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   playerID yearID stint teamID lgID  G AB R H X2B X3B HR RBI SB CS BB SO IBB
1 aardsda01   2004     1    SFN   NL 11  0 0 0   0   0  0   0  0  0  0  0   0
2 aardsda01   2006     1    CHN   NL 45  2 0 0   0   0  0   0  0  0  0  0   0
3 aardsda01   2007     1    CHA   AL 25  0 0 0   0   0  0   0  0  0  0  0   0
4 aardsda01   2008     1    BOS   AL 47  1 0 0   0   0  0   0  0  0  0  1   0
5 aardsda01   2009     1    SEA   AL 73  0 0 0   0   0  0   0  0  0  0  0   0
6 aardsda01   2010     1    SEA   AL 53  0 0 0   0   0  0   0  0  0  0  0   0
  HBP SH SF GIDP
1   0  0  0    0
2   0  1  0    0
3   0  0  0    0
4   0  0  0    0
5   0  0  0    0
6   0  0  0    0</code></pre>
</div>
</div>
<p>Here, we use <code>filter(!is.na(AB))</code> to remove rows where the value for at-bats (<code>AB</code>) is missing (<code>NA</code>). This ensures that we are working only with complete data.</p>
</div>
<p>The <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> function is an indispensable tool for narrowing down large datasets based on specific criteria. Whether you’re filtering by player performance, season, or game outcomes, <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> allows you to extract just the rows that are most relevant to your analysis. In sports analytics, this enables you to focus on specific players, teams, or metrics that drive meaningful insights.</p>
<p>In the next section, we will explore how to use the <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> function to aggregate data, such as calculating team-level statistics or summarizing player performance over a season or career.</p>
</section></section><section id="using-summarise-to-aggregate-data" class="level2" data-number="1.4"><h2 data-number="1.4" class="anchored" data-anchor-id="using-summarise-to-aggregate-data">
<span class="header-section-number">1.4</span> Using <code>summarise()</code> to Aggregate Data</h2>
<p>The <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> function in <code>dplyr</code> is used to create summary statistics from your dataset by collapsing multiple rows into a single value. This function is essential in sports analytics, where you often need to aggregate data to calculate overall metrics, such as total points, average performance statistics, or team-level summaries. With <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code>, you can compute a wide variety of statistics such as sums, averages, minimums, and maximums, allowing for powerful aggregation of data.</p>
<section id="syntax-3" class="level3" data-number="1.4.1"><h3 data-number="1.4.1" class="anchored" data-anchor-id="syntax-3">
<span class="header-section-number">1.4.1</span> Syntax</h3>
<p>The basic syntax of <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> is as follows:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>new_summary <span class="op">=</span> <span class="fu">aggregation_function</span><span class="op">(</span><span class="va">column</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Where:</p>
<ul>
<li>
<code>data</code> is the dataset.</li>
<li>
<code>new_summary</code> is the name of the new summary statistic.</li>
<li>
<code>aggregation_function(column)</code> is the function applied to the column you want to summarize (e.g., <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code>, <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code>, <code><a href="https://rdrr.io/r/base/Extremes.html">min()</a></code>, <code><a href="https://rdrr.io/r/base/Extremes.html">max()</a></code>).</li>
</ul></section><section id="why-use-summarise" class="level3" data-number="1.4.2"><h3 data-number="1.4.2" class="anchored" data-anchor-id="why-use-summarise">
<span class="header-section-number">1.4.2</span> Why Use <code>summarise()</code>?</h3>
<p>In sports analytics, it is often necessary to calculate overall performance metrics, such as:</p>
<ul>
<li>Summing a player’s total points over multiple seasons.</li>
<li>Calculating a team’s average points per game.</li>
<li>Aggregating player data to find league-wide averages or totals.</li>
<li>Computing summary statistics like the highest or lowest scoring games in a season.</li>
</ul>
<p>Using <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code>, you can efficiently compute these summary statistics and gain high-level insights from raw data.</p>
</section><section id="grouping-data-before-summarizing" class="level3" data-number="1.4.3"><h3 data-number="1.4.3" class="anchored" data-anchor-id="grouping-data-before-summarizing">
<span class="header-section-number">1.4.3</span> Grouping Data Before Summarizing</h3>
<p>When using <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code>, it’s common to group data by one or more variables before applying the summary function. This is achieved with the <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> function, which allows you to summarize data across different categories, such as by player, team, or season.</p>
<p>For example:</p>
<ul>
<li>Summarizing total points per player across multiple games.</li>
<li>Calculating the average performance metrics per team in a season.</li>
<li>Aggregating statistics by season to track trends over time.</li>
</ul>
<div id="exm-01_13" class="theorem example">
<p><span class="theorem-title"><strong>Example 1.13 (Summarizing Total Home Runs per Year) </strong></span>Let’s use the <code>Lahman</code> dataset to calculate the total number of home runs hit by all players for each year. First, we will group the data by year and then use <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> to compute the total home runs.</p>
<div class="cell">
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://CRAN.R-project.org/package=Lahman">Lahman</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Summarizing total home runs per year</span></span>
<span><span class="va">home_runs_per_year</span> <span class="op">&lt;-</span> <span class="va">Batting</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">yearID</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>total_HR <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">HR</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">home_runs_per_year</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  yearID total_HR
   &lt;int&gt;    &lt;int&gt;
1   1871       47
2   1872       37
3   1873       47
4   1874       40
5   1875       40
6   1876       40</code></pre>
</div>
</div>
<p>In this example, we first use <code>group_by(yearID)</code> to group the data by year, and then <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> is used to compute the total number of home runs (<code>HR</code>) hit in each year. The <code>na.rm = TRUE</code> argument ensures that missing values are ignored during the summation. This type of summary can help analyze trends in home run performance over time.</p>
</div>
<div id="exm-01_14" class="theorem example">
<p><span class="theorem-title"><strong>Example 1.14 (Calculating Average Batting Average per Year) </strong></span>You can also calculate averages using <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code>. Let’s calculate the average batting average (BA) for each year by grouping the data by <code>yearID</code> and then using the <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> function within <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code>.</p>
<div class="cell">
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Calculating average batting average per year</span></span>
<span><span class="va">batting_average_per_year</span> <span class="op">&lt;-</span> <span class="va">Batting</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">yearID</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>avg_BA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">H</span> <span class="op">/</span> <span class="va">AB</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">batting_average_per_year</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  yearID avg_BA
   &lt;int&gt;  &lt;dbl&gt;
1   1871  0.254
2   1872  0.246
3   1873  0.252
4   1874  0.240
5   1875  0.218
6   1876  0.211</code></pre>
</div>
</div>
<p>In this example, we compute the average batting average (<code>avg_BA</code>) for each year. The <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> function calculates the average of hits divided by at-bats, and <code>na.rm = TRUE</code> ensures that missing data is handled appropriately.</p>
</div>
<section id="multiple-summaries-with-summarise" class="level4"><h4 class="anchored" data-anchor-id="multiple-summaries-with-summarise">Multiple Summaries with <code>summarise()</code>
</h4>
<p>You can compute multiple summary statistics in a single <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> call by simply listing additional summary expressions separated by commas.</p>
<div id="exm-01_15" class="theorem example">
<p><span class="theorem-title"><strong>Example 1.15 (Summarizing Both Total and Average Home Runs per Year) </strong></span>&nbsp;</p>
<div class="cell">
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Summarizing total and average home runs per year</span></span>
<span><span class="va">home_run_stats</span> <span class="op">&lt;-</span> <span class="va">Batting</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">yearID</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>total_HR <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">HR</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>            avg_HR <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">HR</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">home_run_stats</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  yearID total_HR avg_HR
   &lt;int&gt;    &lt;int&gt;  &lt;dbl&gt;
1   1871       47  0.409
2   1872       37  0.236
3   1873       47  0.376
4   1874       40  0.325
5   1875       40  0.184
6   1876       40  0.323</code></pre>
</div>
</div>
<p>In this example, we calculate both the total home runs (<code>total_HR</code>) and the average home runs per player (<code>avg_HR</code>) for each year. This provides both a high-level view (total) and a per-player perspective (average) of home run performance.</p>
</div>
</section></section><section id="adding-summary-statistics-to-the-original-data" class="level3" data-number="1.4.4"><h3 data-number="1.4.4" class="anchored" data-anchor-id="adding-summary-statistics-to-the-original-data">
<span class="header-section-number">1.4.4</span> Adding Summary Statistics to the Original Data</h3>
<p>In some cases, you may want to add summary statistics back to your original dataset. This can be achieved by combining <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> with <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> to append calculated statistics to each row.</p>
<div id="exm-01_16" class="theorem example">
<p><span class="theorem-title"><strong>Example 1.16 (Adding Average Points per Player to Each Team) </strong></span>&nbsp;</p>
<div class="cell">
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sportsdataverse/hoopR">hoopR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">#load the data for 2023</span></span>
<span><span class="va">basketball_data</span> <span class="op">=</span> <span class="fu"><a href="https://hoopR.sportsdataverse.org/reference/load_nba_player_box.html">load_nba_player_box</a></span><span class="op">(</span>seasons <span class="op">=</span> <span class="fl">2023</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">nba_stats</span> <span class="op">=</span> <span class="va">basketball_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">team_name</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>avg_pts_team <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">points</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">right_join</a></span><span class="op">(</span><span class="va">basketball_data</span>, by <span class="op">=</span> <span class="st">"team_name"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">nba_stats</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 58
  team_name avg_pts_team   game_id season season_type game_date 
  &lt;chr&gt;            &lt;dbl&gt;     &lt;int&gt;  &lt;int&gt;       &lt;int&gt; &lt;date&gt;    
1 76ers             10.5 401545117   2023           3 2023-05-14
2 76ers             10.5 401545117   2023           3 2023-05-14
3 76ers             10.5 401545117   2023           3 2023-05-14
4 76ers             10.5 401545117   2023           3 2023-05-14
5 76ers             10.5 401545117   2023           3 2023-05-14
6 76ers             10.5 401545117   2023           3 2023-05-14
# ℹ 52 more variables: game_date_time &lt;dttm&gt;, athlete_id &lt;int&gt;,
#   athlete_display_name &lt;chr&gt;, team_id &lt;int&gt;, team_location &lt;chr&gt;,
#   team_short_display_name &lt;chr&gt;, minutes &lt;dbl&gt;, field_goals_made &lt;int&gt;,
#   field_goals_attempted &lt;int&gt;, three_point_field_goals_made &lt;int&gt;,
#   three_point_field_goals_attempted &lt;int&gt;, free_throws_made &lt;int&gt;,
#   free_throws_attempted &lt;int&gt;, offensive_rebounds &lt;int&gt;,
#   defensive_rebounds &lt;int&gt;, rebounds &lt;int&gt;, assists &lt;int&gt;, steals &lt;int&gt;, …</code></pre>
</div>
</div>
<p>In this example, we first calculate the average points per team (<code>avg_pts_team</code>) and then use <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">right_join()</a></code> to merge this summary statistic back into the original dataset, so that each player’s row now contains their team’s average points.</p>
</div>
<p>The <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> function is a critical tool for aggregating and summarizing data in sports analytics. Whether you’re calculating total points, average performance metrics, or team-level statistics, <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> allows you to collapse large datasets into meaningful summary statistics. By combining <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> with <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code>, you can gain insights into trends across seasons, teams, or players, providing a comprehensive view of the data.</p>
<p>In the next section, we’ll explore the <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> function, which is used to order and rank your data, making it easier to identify top performers and trends.</p>
</section></section><section id="using-arrange-to-order-rows" class="level2" data-number="1.5"><h2 data-number="1.5" class="anchored" data-anchor-id="using-arrange-to-order-rows">
<span class="header-section-number">1.5</span> Using <code>arrange()</code> to Order Rows</h2>
<p>The <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> function in <code>dplyr</code> is used to reorder the rows of a dataset based on the values of one or more variables. This function is particularly useful in sports analytics when you want to rank players or teams according to performance metrics, such as points scored, assists made, or wins achieved. By using <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code>, you can quickly identify top performers, sort data chronologically, or rank teams based on standings.</p>
<section id="syntax-4" class="level3" data-number="1.5.1"><h3 data-number="1.5.1" class="anchored" data-anchor-id="syntax-4">
<span class="header-section-number">1.5.1</span> Syntax</h3>
<p>The basic syntax of <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> is as follows:</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">column1</span>, <span class="va">column2</span>, <span class="va">...</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Where:</p>
<ul>
<li>
<code>data</code> is the dataset.</li>
<li>
<code>column1</code>, <code>column2</code>, etc., are the columns by which the data should be ordered.</li>
</ul>
<p>By default, <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> sorts the rows in ascending order. To sort in descending order, you can wrap the column name in <code><a href="https://dplyr.tidyverse.org/reference/desc.html">desc()</a></code>.</p>
</section><section id="why-use-arrange" class="level3" data-number="1.5.2"><h3 data-number="1.5.2" class="anchored" data-anchor-id="why-use-arrange">
<span class="header-section-number">1.5.2</span> Why Use <code>arrange()</code>?</h3>
<p>In sports analytics, ranking and sorting data is a common task. Whether you’re determining the highest scorers, ordering teams by win percentage, or ranking players by efficiency, <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> allows you to easily reorder your data to facilitate comparisons and insights.</p>
<p>For example, you may want to:</p>
<ul>
<li>Rank basketball players by points scored per game.</li>
<li>Sort baseball teams by total wins.</li>
<li>Rank athletes by efficiency ratings, from highest to lowest.</li>
</ul>
<div id="exm-01_17" class="theorem example">
<p><span class="theorem-title"><strong>Example 1.17 (Arranging by Batting Average) </strong></span>Let’s use the <strong>Lahman</strong> dataset again and sort the players by their batting average (<code>BA</code>). First, we need to calculate the batting average using <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> and then sort the dataset in descending order to identify the top performers.</p>
<div class="cell">
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://CRAN.R-project.org/package=Lahman">Lahman</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">batting_data</span> <span class="op">&lt;-</span> <span class="va">Batting</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>BA <span class="op">=</span> <span class="va">H</span> <span class="op">/</span> <span class="va">AB</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">BA</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">batting_data</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   playerID yearID stint teamID lgID G AB R H X2B X3B HR RBI SB CS BB SO IBB
1  aberal01   1957     2    KC1   AL 3  1 0 1   0   0  0   0  0  0  0  0   0
2 abernte02   1960     1    WS1   AL 2  1 1 1   0   0  0   0  0  0  0  0   0
3 abramge01   1923     1    CIN   NL 3  1 0 1   0   0  0   0  0  0  0  0  NA
4 acklefr01   1964     1    CHA   AL 3  1 0 1   1   0  0   1  0  0  1  0   0
5 alanirj01   2019     2    CIN   NL 8  1 0 1   0   0  0   1  0  0  0  0   0
6 alberan01   2017     1    SEA   AL 9  1 0 1   0   0  0   1  0  0  0  0   0
  HBP SH SF GIDP BA
1   0  0  0    0  1
2   0  0  0    0  1
3   0  0 NA   NA  1
4   0  0  0    0  1
5   0  0  0    0  1
6   0  2  0    0  1</code></pre>
</div>
</div>
<p>In this example, we first calculate the batting average (<code>BA</code>) using <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> and then use <code>arrange(desc(BA))</code> to sort the data in descending order of batting average. This allows us to see the players with the highest batting averages at the top of the dataset.</p>
</div>
</section><section id="arranging-by-multiple-variables" class="level3" data-number="1.5.3"><h3 data-number="1.5.3" class="anchored" data-anchor-id="arranging-by-multiple-variables">
<span class="header-section-number">1.5.3</span> Arranging by Multiple Variables</h3>
<p>You can also sort data by multiple columns. For example, if two players have the same batting average, you might want to break the tie by looking at their home run totals.</p>
<div id="exm-01_18" class="theorem example">
<p><span class="theorem-title"><strong>Example 1.18 (Arranging by Batting Average and Home Runs) </strong></span>&nbsp;</p>
<div class="cell">
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting_data_sorted</span> <span class="op">&lt;-</span> <span class="va">Batting</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>BA <span class="op">=</span> <span class="va">H</span> <span class="op">/</span> <span class="va">AB</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">BA</span><span class="op">)</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">HR</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">batting_data_sorted</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   playerID yearID stint teamID lgID  G AB R H X2B X3B HR RBI SB CS BB SO IBB
1 chacigu01   2010     1    HOU   NL 44  1 1 1   0   0  1   1  0  0  0  0   0
2 hernafe02   2008     1    SEA   AL 31  1 1 1   0   0  1   4  0  0  0  0   0
3 jimerch01   2007     1    SEA   AL 11  2 5 2   0   0  1   1  2  0  0  0   0
4 lefebbi01   1938     1    BOS   AL  1  1 1 1   0   0  1   1  0  0  0  0  NA
5  motagu01   1999     1    MON   NL 51  1 1 1   0   0  1   3  0  0  0  0   0
6 narumbu01   1963     1    BAL   AL  7  1 1 1   0   0  1   2  0  0  0  0   0
  HBP SH SF GIDP BA
1   0  0  0    0  1
2   0  1  0    0  1
3   0  0  0    0  1
4   0  0 NA   NA  1
5   0  0  0    0  1
6   0  0  0    0  1</code></pre>
</div>
</div>
<p>Here, we first sort by batting average (<code>BA</code>) in descending order, and in the case of ties, we further arrange the rows by home runs (<code>HR</code>) in descending order. This type of multi-variable sorting is useful for resolving ties or ranking data based on multiple criteria.</p>
</div>
</section><section id="sorting-chronologically" class="level3" data-number="1.5.4"><h3 data-number="1.5.4" class="anchored" data-anchor-id="sorting-chronologically">
<span class="header-section-number">1.5.4</span> Sorting Chronologically</h3>
<p>In many sports datasets, you might want to sort data chronologically to observe trends over time. This can be done by arranging data by a date or year variable.</p>
<div id="exm-01_19" class="theorem example">
<p><span class="theorem-title"><strong>Example 1.19 (Sorting by Year) </strong></span>Let’s sort the ‘Lahman’ dataset by the <code>yearID</code> variable to view the data in chronological order.</p>
<div class="cell">
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">batting_data_by_year</span> <span class="op">&lt;-</span> <span class="va">Batting</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">yearID</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">batting_data_by_year</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   playerID yearID stint teamID lgID   G  AB  R   H X2B X3B HR RBI SB CS BB  SO
1  abadfe01   2023     1    COL   NL   6   0  0   0   0   0  0   0  0  0  0   0
2 abbotan01   2023     1    CIN   NL  21   0  0   0   0   0  0   0  0  0  0   0
3 abbotco01   2023     1    WAS   NL  22   0  0   0   0   0  0   0  0  0  0   0
4 abramcj01   2023     1    WAS   NL 151 563 83 138  28   6 18  64 47  4 32 118
5 abreual01   2023     1    NYA   AL  45   0  0   0   0   0  0   0  0  0  0   0
6 abreubr01   2023     1    HOU   AL  72   0  0   0   0   0  0   0  0  0  0   0
  IBB HBP SH SF GIDP
1   0   0  0  0    0
2   0   0  0  0    0
3   0   0  0  0    0
4   2  13  3  3    7
5   0   0  0  0    0
6   0   0  0  0    0</code></pre>
</div>
</div>
<p>This example sorts the data in ascending order by <code>yearID</code>, allowing us to see the dataset arranged chronologically by season. Sorting by year or date is especially useful when analyzing time trends in performance or observing how a player’s career evolves over time.</p>
</div>
<p>The <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> function is a valuable tool in sports analytics for ordering and ranking data. Whether you’re sorting players by performance metrics, ranking teams based on wins, or organizing data chronologically, <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> allows you to structure your data in a way that facilitates meaningful analysis. You can arrange data by one or more columns, and by using <code><a href="https://dplyr.tidyverse.org/reference/desc.html">desc()</a></code>, you can sort in descending order to prioritize top performers.</p>
</section></section><section id="concept-quiz" class="level2" data-number="1.6"><h2 data-number="1.6" class="anchored" data-anchor-id="concept-quiz">
<span class="header-section-number">1.6</span> Concept Quiz</h2>
<ol type="1">
<li>
<p>What is the primary function of the <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> function in <code>dplyr</code>?</p>
<div id="radio_NLQWYLKCNF" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_NLQWYLKCNF" value="answer"><span>To add or transform variables</span></label><label><input type="radio" autocomplete="off" name="radio_NLQWYLKCNF" value=""><span>To summarize data into a single value</span></label><label><input type="radio" autocomplete="off" name="radio_NLQWYLKCNF" value=""><span>To select specific columns</span></label><label><input type="radio" autocomplete="off" name="radio_NLQWYLKCNF" value=""><span>To filter rows based on a condition</span></label>
</div>
</li>
<li>
<p>Which function in <code>dplyr</code> is used to select specific columns from a dataset?</p>
<div id="radio_YMAWAOLOYA" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_YMAWAOLOYA" value=""><span><code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code></span></label><label><input type="radio" autocomplete="off" name="radio_YMAWAOLOYA" value="answer"><span><code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code></span></label><label><input type="radio" autocomplete="off" name="radio_YMAWAOLOYA" value=""><span><code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code></span></label><label><input type="radio" autocomplete="off" name="radio_YMAWAOLOYA" value=""><span><code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code></span></label>
</div>
</li>
<li>
<p>In the context of the <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> function, what would happen if you attempt to divide a value by zero without handling it?</p>
<div id="radio_IMIBSMADNI" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_IMIBSMADNI" value=""><span>It would remove the row.</span></label><label><input type="radio" autocomplete="off" name="radio_IMIBSMADNI" value=""><span>The value would be set to <code>NA</code>.</span></label><label><input type="radio" autocomplete="off" name="radio_IMIBSMADNI" value="answer"><span>It would result in an error.</span></label><label><input type="radio" autocomplete="off" name="radio_IMIBSMADNI" value=""><span>The value would be automatically set to zero.</span></label>
</div>
</li>
<li>
<p>Which of the following functions is used to reorder rows in a dataset?</p>
<div id="radio_IERSUIEBGH" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_IERSUIEBGH" value=""><span><code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code></span></label><label><input type="radio" autocomplete="off" name="radio_IERSUIEBGH" value=""><span><code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code></span></label><label><input type="radio" autocomplete="off" name="radio_IERSUIEBGH" value="answer"><span><code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code></span></label><label><input type="radio" autocomplete="off" name="radio_IERSUIEBGH" value=""><span><code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code></span></label>
</div>
</li>
<li>
<p>To extract rows of data that meet specific conditions, such as “players with more than 200 at-bats”, which function would you use?</p>
<div id="radio_JRJEAMXOTC" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_JRJEAMXOTC" value=""><span><code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code></span></label><label><input type="radio" autocomplete="off" name="radio_JRJEAMXOTC" value=""><span><code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code></span></label><label><input type="radio" autocomplete="off" name="radio_JRJEAMXOTC" value=""><span><code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code></span></label><label><input type="radio" autocomplete="off" name="radio_JRJEAMXOTC" value="answer"><span><code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code></span></label>
</div>
</li>
<li><p>True or False: The <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> function allows you to drop specific columns by prefixing their names with a minus sign (-). <select class="webex-select"><option value="blank"></option>
<option value="answer">TRUE</option>
<option value="">FALSE</option></select></p></li>
<li><p>True or False: In the <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> function, using <code>&amp;</code> combines conditions in such a way that both conditions must be true for a row to be included in the subset. <select class="webex-select"><option value="blank"></option>
<option value="answer">TRUE</option>
<option value="">FALSE</option></select></p></li>
<li><p>True or False: The <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> function in <code>dplyr</code> can only sort data in ascending order. <select class="webex-select"><option value="blank"></option>
<option value="">TRUE</option>
<option value="answer">FALSE</option></select></p></li>
</ol>


</section></main><!-- /main --><script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Introduction</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./02_Stringr.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">String, Dates, and Joins</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">STA 3311</div>
  </div>
</footer>


</body></html>