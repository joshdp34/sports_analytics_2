<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>STA 3311 Sports Analytics II - 7&nbsp; Obtaining Sport Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./08_Web.html" rel="next">
<link href="./06_Mixed.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link rel="stylesheet" href="webex.css">
</head>
<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./07_Data.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Obtaining Sport Data</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./"></a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_Intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Intro to Data Manipulation with <code>dplyr</code></span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_Stringr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">String, Dates, and Joins</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_Tidymodels.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introduction to Tidymodels</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_Regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Linear Regression with Regularization</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_Logistic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Logistic Regression with Regularization</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06_Mixed.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Mixed Effects Models</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07_Data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Obtaining Sport Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08_Web.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Web Scraping with Rvest</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09_ML.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Introduction to Machine Learning</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10_Random.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Random Forests</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11_Spatial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Visualization of Player Tracking Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12_knn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">K-Nearest Neighbors</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13_clustering.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Clustering</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14_dimension.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Dimensionality Reduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15_SVM.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Support Vector Machines</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16_DBSCAN.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">DBSCAN</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17_MLP.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Multi-Layer Perceptron</span></span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li>
<a href="#popular-r-packages-for-sports-data" id="toc-popular-r-packages-for-sports-data" class="nav-link active" data-scroll-target="#popular-r-packages-for-sports-data"><span class="header-section-number">7.1</span> Popular R Packages for Sports Data</a>
  <ul class="collapse">
<li><a href="#the-hoopr-package" id="toc-the-hoopr-package" class="nav-link" data-scroll-target="#the-hoopr-package"><span class="header-section-number">7.1.1</span> The hoopR Package</a></li>
  <li><a href="#the-lahman-package" id="toc-the-lahman-package" class="nav-link" data-scroll-target="#the-lahman-package"><span class="header-section-number">7.1.2</span> The Lahman Package</a></li>
  <li><a href="#the-worldfootballr-package" id="toc-the-worldfootballr-package" class="nav-link" data-scroll-target="#the-worldfootballr-package"><span class="header-section-number">7.1.3</span> The worldfootballR Package</a></li>
  <li><a href="#the-fitzroy-package" id="toc-the-fitzroy-package" class="nav-link" data-scroll-target="#the-fitzroy-package"><span class="header-section-number">7.1.4</span> The fitzRoy Package</a></li>
  <li><a href="#the-baseballr-package" id="toc-the-baseballr-package" class="nav-link" data-scroll-target="#the-baseballr-package"><span class="header-section-number">7.1.5</span> The baseballr Package</a></li>
  </ul>
</li>
  <li><a href="#external-websites-for-sports-data" id="toc-external-websites-for-sports-data" class="nav-link" data-scroll-target="#external-websites-for-sports-data"><span class="header-section-number">7.2</span> External Websites for Sports Data</a></li>
  <li><a href="#what-to-look-for-in-a-sports-dataset" id="toc-what-to-look-for-in-a-sports-dataset" class="nav-link" data-scroll-target="#what-to-look-for-in-a-sports-dataset"><span class="header-section-number">7.3</span> What to Look for in a Sports Dataset</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">
<span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Obtaining Sport Data</span>
</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><blockquote class="blockquote">
<p>“I am the greatest, I said that even before I knew I was.” - Muhammad Ali</p>
</blockquote>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="pics/ali.png" class="img-fluid figure-img" width="200"></p>
<figcaption class="figure-caption">Considered to be one of the greatest sports photos in history, Muhammad Ali reacts after his first round knockout of Sonny Liston during the 1965 World Heavyweight Title fight at St.&nbsp;Dominic’s Arena. Lewiston, Maine. May 25, 1965.</figcaption></figure>
</div>
<p>In sports analytics, the foundation of any meaningful analysis is the data itself. Whether we are predicting player performance, analyzing team strategies, or modeling game outcomes, obtaining high-quality sports data is the critical first step. Fortunately, the advent of open-source tools and the growing interest in sports analytics have made a wealth of data accessible to students and researchers alike. In this section, we will explore popular R packages that provide sports data, discuss external websites where additional datasets can be found, and outline key characteristics to consider when selecting a sports dataset for analysis.</p>
<section id="popular-r-packages-for-sports-data" class="level2" data-number="7.1"><h2 data-number="7.1" class="anchored" data-anchor-id="popular-r-packages-for-sports-data">
<span class="header-section-number">7.1</span> Popular R Packages for Sports Data</h2>
<p>The R ecosystem offers several packages that provide direct access to sports data, often pre-formatted for analysis. These packages are particularly valuable for students because they eliminate the need to manually collect data and allow immediate exploration of statistical concepts. Below, we highlight three widely used packages.</p>
<section id="the-hoopr-package" class="level3" data-number="7.1.1"><h3 data-number="7.1.1" class="anchored" data-anchor-id="the-hoopr-package">
<span class="header-section-number">7.1.1</span> The hoopR Package</h3>
<p>The <code>hoopR</code> package, which we used in a previous section, is a powerful tool for accessing men’s basketball data, including both NBA and NCAA statistics. It retrieves data from sources like ESPN and kenpom.com, providing detailed game-by-game player and team performance metrics. For example, we can load player box score data for the 2022-2023 NBA season as follows:</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sportsdataverse/hoopR">hoopR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load NBA player box scores for the 2022-2023 season</span></span>
<span><span class="va">nba_data</span> <span class="op">=</span> <span class="fu"><a href="https://hoopR.sportsdataverse.org/reference/load_nba_player_box.html">load_nba_player_box</a></span><span class="op">(</span>seasons <span class="op">=</span> <span class="fl">2023</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View the first few rows</span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">nba_data</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 33,896
Columns: 57
$ game_id                           &lt;int&gt; 401544850, 401544850, 401544850, 401…
$ season                            &lt;int&gt; 2023, 2023, 2023, 2023, 2023, 2023, …
$ season_type                       &lt;int&gt; 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, …
$ game_date                         &lt;date&gt; 2023-06-12, 2023-06-12, 2023-06-12,…
$ game_date_time                    &lt;dttm&gt; 2023-06-12 20:30:00, 2023-06-12 20:…
$ athlete_id                        &lt;int&gt; 3449, 6430, 4066261, 3137259, 406577…
$ athlete_display_name              &lt;chr&gt; "Kevin Love", "Jimmy Butler", "Bam A…
$ team_id                           &lt;int&gt; 14, 14, 14, 14, 14, 14, 14, 14, 14, …
$ team_name                         &lt;chr&gt; "Heat", "Heat", "Heat", "Heat", "Hea…
$ team_location                     &lt;chr&gt; "Miami", "Miami", "Miami", "Miami", …
$ team_short_display_name           &lt;chr&gt; "Heat", "Heat", "Heat", "Heat", "Hea…
$ minutes                           &lt;dbl&gt; 14, 41, 44, 22, 32, 17, 3, 32, 1, 34…
$ field_goals_made                  &lt;int&gt; 1, 5, 9, 3, 5, 2, 0, 4, 0, 4, NA, NA…
$ field_goals_attempted             &lt;int&gt; 4, 18, 20, 13, 12, 6, 0, 9, 1, 13, N…
$ three_point_field_goals_made      &lt;int&gt; 1, 2, 0, 0, 1, 1, 0, 0, 0, 4, NA, NA…
$ three_point_field_goals_attempted &lt;int&gt; 4, 5, 0, 4, 6, 3, 0, 4, 0, 9, NA, NA…
$ free_throws_made                  &lt;int&gt; 0, 9, 2, 0, 1, 0, 0, 2, 0, 0, NA, NA…
$ free_throws_attempted             &lt;int&gt; 0, 11, 2, 0, 1, 0, 0, 2, 0, 0, NA, N…
$ offensive_rebounds                &lt;int&gt; 0, 1, 5, 0, 1, 0, 0, 1, 1, 2, NA, NA…
$ defensive_rebounds                &lt;int&gt; 2, 2, 7, 0, 7, 3, 1, 4, 0, 7, NA, NA…
$ rebounds                          &lt;int&gt; 2, 3, 12, 0, 8, 3, 1, 5, 1, 9, NA, N…
$ assists                           &lt;int&gt; 0, 5, 1, 3, 1, 3, 0, 1, 0, 4, NA, NA…
$ steals                            &lt;int&gt; 1, 3, 1, 1, 0, 0, 0, 1, 0, 2, NA, NA…
$ blocks                            &lt;int&gt; 2, 0, 0, 0, 1, 2, 0, 1, 0, 1, NA, NA…
$ turnovers                         &lt;int&gt; 0, 1, 1, 0, 1, 2, 0, 2, 0, 1, NA, NA…
$ fouls                             &lt;int&gt; 1, 2, 2, 2, 3, 1, 1, 4, 0, 5, NA, NA…
$ plus_minus                        &lt;chr&gt; "-11", "-3", "-3", "-14", "+2", "-9"…
$ points                            &lt;int&gt; 3, 21, 20, 6, 12, 5, 0, 10, 0, 12, N…
$ starter                           &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, FALSE,…
$ ejected                           &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, F…
$ did_not_play                      &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, F…
$ reason                            &lt;chr&gt; "COACH'S DECISION", "COACH'S DECISIO…
$ active                            &lt;lgl&gt; FALSE, TRUE, TRUE, FALSE, TRUE, TRUE…
$ athlete_jersey                    &lt;chr&gt; "42", "22", "13", "7", "1", "55", "2…
$ athlete_short_name                &lt;chr&gt; "K. Love", "J. Butler", "B. Adebayo"…
$ athlete_headshot_href             &lt;chr&gt; "https://a.espncdn.com/i/headshots/n…
$ athlete_position_name             &lt;chr&gt; "Power Forward", "Small Forward", "C…
$ athlete_position_abbreviation     &lt;chr&gt; "PF", "SF", "C", "PG", "SG", "F", "F…
$ team_display_name                 &lt;chr&gt; "Miami Heat", "Miami Heat", "Miami H…
$ team_uid                          &lt;chr&gt; "s:40~l:46~t:14", "s:40~l:46~t:14", …
$ team_slug                         &lt;chr&gt; "miami-heat", "miami-heat", "miami-h…
$ team_logo                         &lt;chr&gt; "https://a.espncdn.com/i/teamlogos/n…
$ team_abbreviation                 &lt;chr&gt; "MIA", "MIA", "MIA", "MIA", "MIA", "…
$ team_color                        &lt;chr&gt; "98002e", "98002e", "98002e", "98002…
$ team_alternate_color              &lt;chr&gt; "f9a01b", "f9a01b", "f9a01b", "f9a01…
$ home_away                         &lt;chr&gt; "away", "away", "away", "away", "awa…
$ team_winner                       &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, F…
$ team_score                        &lt;int&gt; 89, 89, 89, 89, 89, 89, 89, 89, 89, …
$ opponent_team_id                  &lt;int&gt; 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, …
$ opponent_team_name                &lt;chr&gt; "Nuggets", "Nuggets", "Nuggets", "Nu…
$ opponent_team_location            &lt;chr&gt; "Denver", "Denver", "Denver", "Denve…
$ opponent_team_display_name        &lt;chr&gt; "Denver Nuggets", "Denver Nuggets", …
$ opponent_team_abbreviation        &lt;chr&gt; "DEN", "DEN", "DEN", "DEN", "DEN", "…
$ opponent_team_logo                &lt;chr&gt; "https://a.espncdn.com/i/teamlogos/n…
$ opponent_team_color               &lt;chr&gt; "0e2240", "0e2240", "0e2240", "0e224…
$ opponent_team_alternate_color     &lt;chr&gt; "fec524", "fec524", "fec524", "fec52…
$ opponent_team_score               &lt;int&gt; 94, 94, 94, 94, 94, 94, 94, 94, 94, …</code></pre>
</div>
</div>
<p>This code returns a dataset with columns such as <code>points</code>, <code>minutes</code>, <code>field_goals_made</code>, and <code>team_name</code>, among others. The data is already structured as a tibble, making it seamless to integrate with tidyverse functions like <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>, and <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> for further analysis. The <code>hoopR</code> package is particularly useful for studying player-level performance trends, such as how minutes played influence points scored, as we began exploring in the last section.</p>
</section><section id="the-lahman-package" class="level3" data-number="7.1.2"><h3 data-number="7.1.2" class="anchored" data-anchor-id="the-lahman-package">
<span class="header-section-number">7.1.2</span> The Lahman Package</h3>
<p>The <code>Lahman</code> package provides historical Major League Baseball (MLB) data, curated from the Lahman Baseball Database. It includes comprehensive statistics on players, teams, and games dating back to the 19th century. For example, the <code>Batting</code> dataset contains annual batting statistics for MLB players. We can load and inspect it as follows:</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://CRAN.R-project.org/package=Lahman">Lahman</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load the Batting dataset</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">Batting</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Convert to a tibble and view</span></span>
<span><span class="va">batting_data</span> <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span><span class="op">(</span><span class="va">Batting</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">batting_data</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 113,799
Columns: 22
$ playerID &lt;chr&gt; "aardsda01", "aardsda01", "aardsda01", "aardsda01", "aardsda0…
$ yearID   &lt;int&gt; 2004, 2006, 2007, 2008, 2009, 2010, 2012, 2013, 2015, 1954, 1…
$ stint    &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
$ teamID   &lt;fct&gt; SFN, CHN, CHA, BOS, SEA, SEA, NYA, NYN, ATL, ML1, ML1, ML1, M…
$ lgID     &lt;fct&gt; NL, NL, AL, AL, AL, AL, AL, NL, NL, NL, NL, NL, NL, NL, NL, N…
$ G        &lt;int&gt; 11, 45, 25, 47, 73, 53, 1, 43, 33, 122, 153, 153, 151, 153, 1…
$ AB       &lt;int&gt; 0, 2, 0, 1, 0, 0, 0, 0, 1, 468, 602, 609, 615, 601, 629, 590,…
$ R        &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 58, 105, 106, 118, 109, 116, 102, …
$ H        &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 131, 189, 200, 198, 196, 223, 172,…
$ X2B      &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 27, 37, 34, 27, 34, 46, 20, 39, 28…
$ X3B      &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 9, 14, 6, 4, 7, 11, 10, 6, 4, 2…
$ HR       &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 13, 27, 26, 44, 30, 39, 40, 34, 45…
$ RBI      &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 69, 106, 92, 132, 95, 123, 126, 12…
$ SB       &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 2, 1, 4, 8, 16, 21, 15, 31, …
$ CS       &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 1, 4, 1, 1, 0, 7, 9, 7, 5, 4, 4…
$ BB       &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 28, 49, 37, 57, 59, 51, 60, 56, 66…
$ SO       &lt;int&gt; 0, 0, 0, 1, 0, 0, 0, 0, 1, 39, 61, 54, 58, 49, 54, 63, 64, 73…
$ IBB      &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, NA, 5, 6, 15, 16, 17, 13, 20, 14, …
$ HBP      &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 3, 2, 0, 1, 4, 2, 2, 3, 0, 0, 1…
$ SH       &lt;int&gt; 0, 1, 0, 0, 0, 0, 0, 0, 0, 6, 7, 5, 0, 0, 0, 0, 1, 0, 0, 0, 0…
$ SF       &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 4, 7, 3, 3, 9, 12, 9, 6, 5, 2, …
$ GIDP     &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 13, 20, 21, 13, 21, 19, 8, 16, 14,…</code></pre>
</div>
</div>
<p>This dataset includes variables like <code>playerID</code>, <code>yearID</code>, <code>AB</code> (at-bats), <code>H</code> (hits), and <code>HR</code> (home runs), which we used in Section 1 to calculate batting averages with <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>. The <code>Lahman</code> package is ideal for longitudinal analyses, such as examining trends in player performance over time or comparing team statistics across seasons.</p>
</section><section id="the-worldfootballr-package" class="level3" data-number="7.1.3"><h3 data-number="7.1.3" class="anchored" data-anchor-id="the-worldfootballr-package">
<span class="header-section-number">7.1.3</span> The worldfootballR Package</h3>
<p>The <code>worldfootballR</code> package is a versatile tool for accessing football (soccer) data from popular websites like FBref, Transfermarkt, and Understat. It provides game, team, and player statistics in a tidy format, making it an excellent resource for analyzing one of the world’s most popular sports. For example, we can load match results for the English Premier League as follows:</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/JaseZiv/worldfootballR">worldfootballR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load EPL match results for the 2022-2023 season</span></span>
<span><span class="va">epl_matches</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/worldfootballR/man/fb_season_team_stats.html">fb_season_team_stats</a></span><span class="op">(</span>country <span class="op">=</span> <span class="st">"ENG"</span>, </span>
<span>                                    gender <span class="op">=</span> <span class="st">"M"</span>,</span>
<span>                                    tier <span class="op">=</span> <span class="st">"1st"</span>, <span class="co">#for EPL</span></span>
<span>                                    season_end_year <span class="op">=</span> <span class="fl">2023</span>, </span>
<span>                                    stat_type <span class="op">=</span> <span class="st">"standard"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View the data</span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">epl_matches</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 40
Columns: 37
$ Competition_Name              &lt;chr&gt; "Premier League", "Premier League", "Pre…
$ Gender                        &lt;chr&gt; "M", "M", "M", "M", "M", "M", "M", "M", …
$ Country                       &lt;chr&gt; "ENG", "ENG", "ENG", "ENG", "ENG", "ENG"…
$ Season_End_Year               &lt;int&gt; 2023, 2023, 2023, 2023, 2023, 2023, 2023…
$ Squad                         &lt;chr&gt; "Arsenal", "Aston Villa", "Bournemouth",…
$ Team_or_Opponent              &lt;chr&gt; "team", "team", "team", "team", "team", …
$ Num_Players                   &lt;dbl&gt; 26, 26, 31, 25, 29, 32, 26, 28, 29, 29, …
$ Age                           &lt;dbl&gt; 24.7, 27.0, 26.3, 26.2, 26.3, 26.3, 26.7…
$ Poss                          &lt;dbl&gt; 59.3, 49.3, 40.4, 43.8, 60.2, 58.7, 46.3…
$ MP_Playing_Time               &lt;dbl&gt; 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, …
$ Starts_Playing_Time           &lt;dbl&gt; 418, 418, 418, 418, 418, 418, 418, 418, …
$ Min_Playing_Time              &lt;dbl&gt; 3420, 3420, 3420, 3420, 3420, 3420, 3420…
$ Mins_Per_90_Playing_Time      &lt;dbl&gt; 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, …
$ Gls                           &lt;dbl&gt; 84, 49, 37, 56, 68, 37, 38, 32, 52, 45, …
$ Ast                           &lt;dbl&gt; 64, 35, 24, 36, 46, 27, 29, 24, 33, 31, …
$ G_plus_A                      &lt;dbl&gt; 148, 84, 61, 92, 114, 64, 67, 56, 85, 76…
$ G_minus_PK                    &lt;dbl&gt; 81, 46, 37, 49, 62, 34, 37, 29, 47, 44, …
$ PK                            &lt;dbl&gt; 3, 3, 0, 7, 6, 3, 1, 3, 5, 1, 3, 2, 9, 3…
$ PKatt                         &lt;dbl&gt; 4, 4, 0, 8, 6, 3, 3, 3, 9, 3, 6, 4, 10, …
$ CrdY                          &lt;dbl&gt; 51, 80, 68, 57, 58, 81, 82, 81, 80, 89, …
$ CrdR                          &lt;dbl&gt; 0, 1, 0, 1, 0, 3, 3, 2, 1, 3, 2, 1, 1, 2…
$ xG_Expected                   &lt;dbl&gt; 71.6, 50.3, 38.5, 56.3, 73.3, 49.5, 39.3…
$ npxG_Expected                 &lt;dbl&gt; 68.9, 47.2, 38.5, 50.1, 68.9, 47.2, 36.8…
$ xAG_Expected                  &lt;dbl&gt; 53.5, 38.8, 28.4, 38.4, 52.2, 38.6, 29.0…
$ npxG_plus_xAG_Expected        &lt;dbl&gt; 122.4, 86.0, 66.9, 88.5, 121.2, 85.8, 65…
$ PrgC_Progression              &lt;dbl&gt; 824, 637, 504, 392, 809, 829, 556, 500, …
$ PrgP_Progression              &lt;dbl&gt; 2049, 1242, 1006, 1131, 1849, 1737, 1243…
$ Gls_Per_Minutes               &lt;dbl&gt; 2.21, 1.29, 0.97, 1.47, 1.79, 0.97, 1.00…
$ Ast_Per_Minutes               &lt;dbl&gt; 1.68, 0.92, 0.63, 0.95, 1.21, 0.71, 0.76…
$ G_plus_A_Per_Minutes          &lt;dbl&gt; 3.89, 2.21, 1.61, 2.42, 3.00, 1.68, 1.76…
$ G_minus_PK_Per_Minutes        &lt;dbl&gt; 2.13, 1.21, 0.97, 1.29, 1.63, 0.89, 0.97…
$ G_plus_A_minus_PK_Per_Minutes &lt;dbl&gt; 3.82, 2.13, 1.61, 2.24, 2.84, 1.61, 1.74…
$ xG_Per_Minutes                &lt;dbl&gt; 1.88, 1.32, 1.01, 1.48, 1.93, 1.30, 1.03…
$ xAG_Per_Minutes               &lt;dbl&gt; 1.41, 1.02, 0.75, 1.01, 1.37, 1.02, 0.76…
$ xG_plus_xAG_Per_Minutes       &lt;dbl&gt; 3.29, 2.34, 1.76, 2.49, 3.30, 2.32, 1.80…
$ npxG_Per_Minutes              &lt;dbl&gt; 1.81, 1.24, 1.01, 1.32, 1.81, 1.24, 0.97…
$ npxG_plus_xAG_Per_Minutes     &lt;dbl&gt; 3.22, 2.26, 1.76, 2.33, 3.19, 2.26, 1.73…</code></pre>
</div>
</div>
<p>This returns a tibble with variables like Squad and Gls (goals scored). The package’s compatibility with tidyverse functions allows us to easily filter teams or compute summary statistics, such as average goals per match, using <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code>.</p>
</section><section id="the-fitzroy-package" class="level3" data-number="7.1.4"><h3 data-number="7.1.4" class="anchored" data-anchor-id="the-fitzroy-package">
<span class="header-section-number">7.1.4</span> The fitzRoy Package</h3>
<p>The <code>fitzRoy</code> package provides access to Australian Rules Football (AFL) data, including match results, player statistics, and historical records from sources like afltables.com. It’s designed to encourage reproducible sports analysis and is particularly relevant for studying Australia’s leading commercial sport. Here’s an example of loading AFL match data:</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://jimmyday12.github.io/fitzRoy/">fitzRoy</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load AFL match results for the 2022 season</span></span>
<span><span class="va">afl_matches</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://jimmyday12.github.io/fitzRoy/reference/fetch_results.html">fetch_results_afl</a></span><span class="op">(</span>season <span class="op">=</span> <span class="fl">2022</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View the data</span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">afl_matches</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 207
Columns: 77
$ k2kSponsored                        &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE,…
$ match.name                          &lt;chr&gt; "Melbourne Vs Western Bulldogs", "…
$ match.date                          &lt;dttm&gt; 2022-03-16 08:10:00, 2022-03-17 0…
$ match.status                        &lt;chr&gt; "CONCLUDED", "CONCLUDED", "CONCLUD…
$ match.matchId                       &lt;chr&gt; "CD_M20220140101", "CD_M2022014010…
$ match.venue                         &lt;chr&gt; "CD_V40", "CD_V40", "CD_V190", "CD…
$ match.utcStartTime                  &lt;chr&gt; "2022-03-16T08:10:00", "2022-03-17…
$ match.homeTeamId                    &lt;chr&gt; "CD_T90", "CD_T30", "CD_T130", "CD…
$ match.awayTeamId                    &lt;chr&gt; "CD_T140", "CD_T120", "CD_T40", "C…
$ match.round                         &lt;chr&gt; "CD_R202201401", "CD_R202201401", …
$ match.venueLocalStartTime           &lt;chr&gt; "2022-03-16T19:10:00", "2022-03-17…
$ match.abbr                          &lt;chr&gt; "MELB V WB", "CARL V RICH", "STK V…
$ match.twitterHashTag                &lt;chr&gt; "#afldeesdogs", "#aflbluestigers",…
$ match.homeTeam.name                 &lt;chr&gt; "Melbourne", "Carlton", "St Kilda"…
$ match.homeTeam.timeZone             &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ match.homeTeam.teamId               &lt;chr&gt; "CD_T90", "CD_T30", "CD_T130", "CD…
$ match.homeTeam.abbr                 &lt;chr&gt; "MELB", "CARL", "STK", "GEEL", "GW…
$ match.homeTeam.nickname             &lt;chr&gt; "Demons", "Blues", "Saints", "Cats…
$ match.awayTeam.name                 &lt;chr&gt; "Western Bulldogs", "Richmond", "C…
$ match.awayTeam.timeZone             &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ match.awayTeam.teamId               &lt;chr&gt; "CD_T140", "CD_T120", "CD_T40", "C…
$ match.awayTeam.abbr                 &lt;chr&gt; "WB", "RICH", "COLL", "ESS", "SYD"…
$ match.awayTeam.nickname             &lt;chr&gt; "Bulldogs", "Tigers", "Magpies", "…
$ venue.address                       &lt;chr&gt; "Melbourne", "Melbourne", "Melbour…
$ venue.name                          &lt;chr&gt; "MCG", "MCG", "Marvel Stadium", "M…
$ venue.state                         &lt;chr&gt; "VIC", "VIC", "VIC", "VIC", "NSW",…
$ venue.timeZone                      &lt;chr&gt; "Australia/Melbourne", "Australia/…
$ venue.venueId                       &lt;chr&gt; "CD_V40", "CD_V40", "CD_V190", "CD…
$ venue.abbreviation                  &lt;chr&gt; "MCG", "MCG", "MRVL", "MCG", "ASA"…
$ venue.capacity                      &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ venue.groundDimension               &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ venue.latitude                      &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ venue.longitude                     &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ venue.landOwner                     &lt;chr&gt; "Wurundjeri", "Wurundjeri", "Wurun…
$ round.name                          &lt;chr&gt; "Round 1", "Round 1", "Round 1", "…
$ round.year                          &lt;chr&gt; "2022", "2022", "2022", "2022", "2…
$ round.roundId                       &lt;chr&gt; "CD_R202201401", "CD_R202201401", …
$ round.abbreviation                  &lt;chr&gt; "Rd 1", "Rd 1", "Rd 1", "Rd 1", "R…
$ round.competitionId                 &lt;chr&gt; "CD_S2022014", "CD_S2022014", "CD_…
$ round.roundNumber                   &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2…
$ status                              &lt;chr&gt; "CONCLUDED", "CONCLUDED", "CONCLUD…
$ matchId                             &lt;chr&gt; "CD_M20220140101", "CD_M2022014010…
$ scoreWorm                           &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ scoreMap                            &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ lastUpdated                         &lt;chr&gt; "2022-03-16T11:06:41.727+0000", "2…
$ homeTeamScore.periodScore           &lt;list&gt; [&lt;data.frame[4 x 5]&gt;], [&lt;data.fra…
$ homeTeamScore.rushedBehinds         &lt;int&gt; 2, 1, 2, 6, 3, 3, 3, 0, 2, 3, 2, 2…
$ homeTeamScore.minutesInFront        &lt;int&gt; 85, 42, 5, 125, 64, 57, 57, 29, 56…
$ homeTeamScore.matchScore.totalScore &lt;int&gt; 97, 101, 85, 138, 92, 80, 78, 82, …
$ homeTeamScore.matchScore.goals      &lt;int&gt; 14, 14, 12, 20, 13, 11, 11, 12, 12…
$ homeTeamScore.matchScore.behinds    &lt;int&gt; 13, 17, 13, 18, 14, 14, 12, 10, 8,…
$ homeTeamScore.matchScore.superGoals &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ awayTeamScore.periodScore           &lt;list&gt; [&lt;data.frame[4 x 5]&gt;], [&lt;data.fra…
$ awayTeamScore.rushedBehinds         &lt;int&gt; 1, 2, 1, 2, 4, 1, 2, 2, 3, 1, 5, 2…
$ awayTeamScore.minutesInFront        &lt;int&gt; 29, 65, 117, 0, 51, 50, 56, 82, 49…
$ awayTeamScore.matchScore.totalScore &lt;int&gt; 71, 76, 102, 72, 112, 69, 58, 83, …
$ awayTeamScore.matchScore.goals      &lt;int&gt; 11, 11, 15, 11, 17, 10, 8, 11, 16,…
$ awayTeamScore.matchScore.behinds    &lt;int&gt; 5, 10, 12, 6, 10, 9, 10, 17, 11, 6…
$ awayTeamScore.matchScore.superGoals &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ matchClock.periods                  &lt;list&gt; [&lt;data.frame[4 x 5]&gt;], [&lt;data.fra…
$ weather.description                 &lt;chr&gt; "Humid Possible shower", "Possible…
$ weather.tempInCelsius               &lt;dbl&gt; 27, 29, 21, 29, 23, 18, 24, 18, 18…
$ weather.weatherType                 &lt;chr&gt; "RAIN", "RAIN", "RAIN", "MOSTLY_SU…
$ homeTeamScoreChart.goals            &lt;int&gt; 14, 14, 12, 20, 13, 11, 11, 12, 12…
$ homeTeamScoreChart.leftBehinds      &lt;int&gt; 8, 6, 6, 4, 5, 8, 3, 4, 0, 4, 2, 2…
$ homeTeamScoreChart.rightBehinds     &lt;int&gt; 0, 5, 4, 5, 4, 2, 3, 5, 3, 2, 1, 5…
$ homeTeamScoreChart.leftPosters      &lt;int&gt; 2, 5, 1, 2, 1, 1, 3, 0, 1, 1, 0, 0…
$ homeTeamScoreChart.rightPosters     &lt;int&gt; 1, 0, 0, 1, 1, 0, 0, 1, 1, 1, 0, 1…
$ homeTeamScoreChart.rushedBehinds    &lt;int&gt; 2, 1, 2, 6, 3, 3, 3, 0, 2, 3, 2, 2…
$ homeTeamScoreChart.touchedBehinds   &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0…
$ awayTeamScoreChart.goals            &lt;int&gt; 11, 11, 15, 11, 17, 10, 8, 11, 16,…
$ awayTeamScoreChart.leftBehinds      &lt;int&gt; 2, 3, 5, 3, 2, 2, 2, 8, 3, 3, 5, 6…
$ awayTeamScoreChart.rightBehinds     &lt;int&gt; 2, 5, 3, 1, 4, 5, 4, 6, 2, 1, 6, 0…
$ awayTeamScoreChart.leftPosters      &lt;int&gt; 0, 0, 2, 0, 0, 1, 0, 1, 2, 1, 0, 2…
$ awayTeamScoreChart.rightPosters     &lt;int&gt; 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0…
$ awayTeamScoreChart.rushedBehinds    &lt;int&gt; 1, 2, 1, 2, 4, 1, 2, 2, 3, 1, 5, 2…
$ awayTeamScoreChart.touchedBehinds   &lt;int&gt; 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0…</code></pre>
</div>
</div>
<p>The resulting dataset includes columns like <code>homeTeam</code>, <code>awayTeam</code>, and <code>venue</code>, structured as a tibble. This package integrates well with tidyverse tools, enabling analyses such as calculating win percentages with <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> or aggregating team performance with <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code>.</p>
</section><section id="the-baseballr-package" class="level3" data-number="7.1.5"><h3 data-number="7.1.5" class="anchored" data-anchor-id="the-baseballr-package">
<span class="header-section-number">7.1.5</span> The baseballr Package</h3>
<p>The <code>baseballr</code> package offers tools to acquire and analyze MLB data, complementing the <code>Lahman</code> package with more current and granular datasets, such as pitch-by-pitch records from MLB’s Statcast system. For example, we can retrieve daily batter statistics:</p>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://billpetti.github.io/baseballr/">baseballr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load batter stats for a specific date</span></span>
<span><span class="va">batter_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://billpetti.github.io/baseballr/reference/statcast_search.html">statcast_search_batters</a></span><span class="op">(</span></span>
<span>  start_date <span class="op">=</span> <span class="st">"2024-06-01"</span>, </span>
<span>  end_date <span class="op">=</span> <span class="st">"2024-06-01"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># View the data</span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">batter_data</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 4,388
Columns: 113
$ pitch_type                       &lt;chr&gt; "SL", "FF", "SL", "CH", "FF", "SI", "…
$ game_date                        &lt;date&gt; 2024-06-01, 2024-06-01, 2024-06-01, …
$ release_speed                    &lt;dbl&gt; 83.9, 96.6, 85.0, 85.9, 95.6, 91.3, 8…
$ release_pos_x                    &lt;dbl&gt; -2.34, -1.87, -2.14, -1.35, -2.01, -1…
$ release_pos_z                    &lt;dbl&gt; 5.86, 6.29, 6.11, 4.84, 6.24, 4.91, 6…
$ player_name                      &lt;chr&gt; "Amaya, Miguel", "Amaya, Miguel", "Am…
$ batter                           &lt;dbl&gt; 665804, 665804, 665804, 518934, 66580…
$ pitcher                          &lt;dbl&gt; 668881, 668881, 668881, 657277, 66888…
$ events                           &lt;chr&gt; "field_out", "", "", "field_out", "",…
$ description                      &lt;chr&gt; "hit_into_play", "foul", "called_stri…
$ spin_dir                         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ spin_rate_deprecated             &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ break_angle_deprecated           &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ break_length_deprecated          &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ zone                             &lt;dbl&gt; 9, 3, 3, 8, 2, 14, 12, 8, 11, 12, 14,…
$ des                              &lt;chr&gt; "Miguel Amaya grounds out, third base…
$ game_type                        &lt;chr&gt; "R", "R", "R", "R", "R", "R", "R", "R…
$ stand                            &lt;chr&gt; "R", "R", "R", "R", "R", "R", "R", "R…
$ p_throws                         &lt;chr&gt; "R", "R", "R", "R", "R", "R", "R", "R…
$ home_team                        &lt;chr&gt; "CHC", "CHC", "CHC", "SF", "CHC", "SF…
$ away_team                        &lt;chr&gt; "CIN", "CIN", "CIN", "NYY", "CIN", "N…
$ type                             &lt;chr&gt; "X", "S", "S", "X", "S", "B", "B", "X…
$ hit_location                     &lt;int&gt; 5, NA, NA, 8, NA, NA, NA, 8, NA, NA, …
$ bb_type                          &lt;chr&gt; "ground_ball", "", "", "fly_ball", ""…
$ balls                            &lt;int&gt; 1, 1, 1, 2, 1, 1, 0, 1, 3, 1, 2, 0, 2…
$ strikes                          &lt;int&gt; 2, 2, 1, 1, 0, 1, 0, 1, 2, 0, 2, 0, 1…
$ game_year                        &lt;int&gt; 2024, 2024, 2024, 2024, 2024, 2024, 2…
$ pfx_x                            &lt;dbl&gt; 0.68, -0.58, 0.62, -0.48, -0.26, -1.1…
$ pfx_z                            &lt;dbl&gt; -0.06, 1.40, 0.21, -0.34, 1.41, -0.27…
$ plate_x                          &lt;dbl&gt; 0.40, 0.60, 0.51, -0.26, -0.12, 2.52,…
$ plate_z                          &lt;dbl&gt; 1.62, 2.85, 2.77, 1.94, 3.27, 1.64, 6…
$ on_3b                            &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ on_2b                            &lt;dbl&gt; 691718, 691718, 691718, NA, 691718, N…
$ on_1b                            &lt;dbl&gt; NA, NA, NA, NA, NA, NA, 691718, 59612…
$ outs_when_up                     &lt;int&gt; 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2…
$ inning                           &lt;dbl&gt; 6, 6, 6, 7, 6, 7, 6, 6, 6, 7, 6, 7, 6…
$ inning_topbot                    &lt;chr&gt; "Bot", "Bot", "Bot", "Top", "Bot", "T…
$ hc_x                             &lt;dbl&gt; 104.36, NA, NA, 163.44, NA, NA, NA, 1…
$ hc_y                             &lt;dbl&gt; 161.21, NA, NA, 56.32, NA, NA, NA, 60…
$ tfs_deprecated                   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ tfs_zulu_deprecated              &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ umpire                           &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ sv_id                            &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ vx0                              &lt;dbl&gt; 5.008668, 7.906540, 4.981759, 3.60107…
$ vy0                              &lt;dbl&gt; -122.1273, -140.2967, -123.8170, -125…
$ vz0                              &lt;dbl&gt; -3.25865951, -6.79825191, -1.97920247…
$ ax                               &lt;dbl&gt; 5.735450, -9.463638, 5.524153, -5.703…
$ ay                               &lt;dbl&gt; 25.01977, 31.94344, 22.91186, 20.7111…
$ az                               &lt;dbl&gt; -32.32632, -12.26135, -29.81482, -35.…
$ sz_top                           &lt;dbl&gt; 3.32, 3.32, 3.21, 3.30, 3.32, 3.22, 3…
$ sz_bot                           &lt;dbl&gt; 1.57, 1.57, 1.55, 1.58, 1.57, 1.58, 1…
$ hit_distance_sc                  &lt;dbl&gt; 5, 261, NA, 365, 147, NA, NA, 345, NA…
$ launch_speed                     &lt;dbl&gt; 88.7, 90.1, NA, 100.9, 88.0, NA, NA, …
$ launch_angle                     &lt;dbl&gt; -17, 50, NA, 24, 75, NA, NA, 16, NA, …
$ effective_speed                  &lt;dbl&gt; 83.9, 96.6, 85.4, 87.9, 95.7, 92.4, 8…
$ release_spin_rate                &lt;dbl&gt; 2308, 2328, 2287, 1431, 2355, 2053, 2…
$ release_extension                &lt;dbl&gt; 6.4, 6.4, 6.3, 7.1, 6.4, 7.7, 6.0, 6.…
$ game_pk                          &lt;dbl&gt; 746870, 746870, 746870, 745332, 74687…
$ fielder_2                        &lt;dbl&gt; 571912, 571912, 571912, 672275, 57191…
$ fielder_3                        &lt;dbl&gt; 600869, 600869, 600869, 527038, 60086…
$ fielder_4                        &lt;dbl&gt; 663697, 663697, 663697, 689172, 66369…
$ fielder_5                        &lt;dbl&gt; 669289, 669289, 669289, 656305, 66928…
$ fielder_6                        &lt;dbl&gt; 682829, 682829, 682829, 669477, 68282…
$ fielder_7                        &lt;dbl&gt; 668715, 668715, 668715, 671218, 66871…
$ fielder_8                        &lt;dbl&gt; 670770, 670770, 670770, 682641, 67077…
$ fielder_9                        &lt;dbl&gt; 666181, 666181, 666181, 573262, 66618…
$ release_pos_y                    &lt;dbl&gt; 54.13, 54.12, 54.18, 53.45, 54.12, 52…
$ estimated_ba_using_speedangle    &lt;dbl&gt; 0.100, NA, NA, 0.606, NA, NA, NA, 0.6…
$ estimated_woba_using_speedangle  &lt;dbl&gt; 0.076000, NA, NA, 0.988000, NA, NA, N…
$ woba_value                       &lt;dbl&gt; 0.0, NA, NA, 0.0, NA, NA, NA, 0.0, 0.…
$ woba_denom                       &lt;int&gt; 1, NA, NA, 1, NA, NA, NA, 1, 1, NA, N…
$ babip_value                      &lt;int&gt; 0, NA, NA, 0, NA, NA, NA, 0, 0, NA, N…
$ iso_value                        &lt;int&gt; 0, NA, NA, 0, NA, NA, NA, 0, 0, NA, N…
$ launch_speed_angle               &lt;int&gt; 2, NA, NA, 6, NA, NA, NA, 6, NA, NA, …
$ at_bat_number                    &lt;dbl&gt; 58, 58, 58, 49, 58, 49, 58, 52, 57, 4…
$ pitch_number                     &lt;dbl&gt; 5, 4, 3, 4, 2, 3, 1, 3, 6, 2, 5, 1, 4…
$ pitch_name                       &lt;chr&gt; "Slider", "4-Seam Fastball", "Slider"…
$ home_score                       &lt;dbl&gt; 5, 5, 5, 3, 5, 3, 5, 1, 5, 3, 5, 3, 1…
$ away_score                       &lt;dbl&gt; 5, 5, 5, 4, 5, 4, 5, 6, 5, 4, 5, 4, 4…
$ bat_score                        &lt;dbl&gt; 5, 5, 5, 4, 5, 4, 5, 1, 5, 4, 5, 4, 4…
$ fld_score                        &lt;dbl&gt; 5, 5, 5, 3, 5, 3, 5, 6, 5, 3, 5, 3, 1…
$ post_away_score                  &lt;dbl&gt; 5, 5, 5, 4, 5, 4, 5, 6, 5, 4, 5, 4, 5…
$ post_home_score                  &lt;dbl&gt; 5, 5, 5, 3, 5, 3, 5, 1, 5, 3, 5, 3, 1…
$ post_bat_score                   &lt;dbl&gt; 5, 5, 5, 4, 5, 4, 5, 1, 5, 4, 5, 4, 5…
$ post_fld_score                   &lt;dbl&gt; 5, 5, 5, 3, 5, 3, 5, 6, 5, 3, 5, 3, 1…
$ if_fielding_alignment            &lt;chr&gt; "Standard", "Standard", "Standard", "…
$ of_fielding_alignment            &lt;chr&gt; "Standard", "Standard", "Standard", "…
$ spin_axis                        &lt;dbl&gt; 109, 210, 98, 265, 206, 239, 209, 212…
$ delta_home_win_exp               &lt;dbl&gt; -0.054, 0.000, 0.000, 0.012, 0.000, 0…
$ delta_run_exp                    &lt;dbl&gt; -0.211, 0.000, -0.060, -0.303, -0.043…
$ bat_speed                        &lt;dbl&gt; 61.6, 74.9, NA, 70.5, 71.8, NA, NA, 7…
$ swing_length                     &lt;dbl&gt; 6.8, 6.6, NA, 7.3, 6.7, NA, NA, 7.4, …
$ estimated_slg_using_speedangle   &lt;dbl&gt; 0.110, NA, NA, 1.758, NA, NA, NA, 1.0…
$ delta_pitcher_run_exp            &lt;dbl&gt; 0.211, 0.000, 0.060, 0.303, 0.043, -0…
$ hyper_speed                      &lt;dbl&gt; 88.7, 90.1, NA, 100.9, 88.0, NA, NA, …
$ home_score_diff                  &lt;int&gt; 0, 0, 0, -1, 0, -1, 0, -5, 0, -1, 0, …
$ bat_score_diff                   &lt;int&gt; 0, 0, 0, 1, 0, 1, 0, -5, 0, 1, 0, 1, …
$ home_win_exp                     &lt;dbl&gt; 0.554, 0.554, 0.554, 0.342, 0.554, 0.…
$ bat_win_exp                      &lt;dbl&gt; 0.554, 0.554, 0.554, 0.658, 0.554, 0.…
$ age_pit_legacy                   &lt;int&gt; 24, 24, 24, 27, 24, 27, 24, 28, 24, 2…
$ age_bat_legacy                   &lt;int&gt; 25, 25, 25, 35, 25, 35, 25, 34, 22, 3…
$ age_pit                          &lt;int&gt; 25, 25, 25, 28, 25, 28, 25, 28, 25, 2…
$ age_bat                          &lt;int&gt; 25, 25, 25, 36, 25, 36, 25, 35, 22, 3…
$ n_thruorder_pitcher              &lt;int&gt; 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3…
$ n_priorpa_thisgame_player_at_bat &lt;int&gt; 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2…
$ pitcher_days_since_prev_game     &lt;int&gt; 7, 7, 7, 6, 7, 6, 7, 7, 7, 6, 7, 6, 6…
$ batter_days_since_prev_game      &lt;int&gt; 2, 2, 2, 2, 2, 2, 2, 1, 1, 2, 1, 2, 6…
$ pitcher_days_until_next_game     &lt;int&gt; 5, 5, 5, 6, 5, 6, 5, 6, 5, 6, 5, 6, 7…
$ batter_days_until_next_game      &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
$ api_break_z_with_gravity         &lt;dbl&gt; 3.31, 1.05, 2.92, 3.37, 1.08, 3.08, 1…
$ api_break_x_arm                  &lt;dbl&gt; -0.68, 0.58, -0.62, 0.48, 0.26, 1.16,…
$ api_break_x_batter_in            &lt;dbl&gt; -0.68, 0.58, -0.62, 0.48, 0.26, 1.16,…
$ arm_angle                        &lt;dbl&gt; 34.5, 38.8, 39.4, 19.1, 38.2, 21.4, 3…</code></pre>
</div>
</div>
</section></section><section id="external-websites-for-sports-data" class="level2" data-number="7.2"><h2 data-number="7.2" class="anchored" data-anchor-id="external-websites-for-sports-data">
<span class="header-section-number">7.2</span> External Websites for Sports Data</h2>
<p>Beyond R packages, numerous websites provide sports data that can be downloaded and imported into R for analysis. These sources often offer raw data in formats like CSV, which can be read into R using <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> from the tidyverse. Below are some notable options:</p>
<ul>
<li><p><strong>Basketball-Reference.com</strong>: A comprehensive resource for basketball statistics, including NBA, NCAA, and international leagues. Data such as Paul George’s free throw attempts (used in Section 2) can be exported as CSV files. For example, navigate to a player’s page, select a season, and download the game log.</p></li>
<li><p><strong>Baseball-Reference.com</strong>: The baseball counterpart to Basketball-Reference, offering detailed MLB statistics. It provides data similar to the <code>Lahman</code> package but with additional game-level granularity, such as pitch-by-pitch records.</p></li>
<li><p><strong>ESPN.com</strong>: A broad source for real-time and historical data across sports like basketball, football, and baseball. ESPN’s API is accessible via packages like <code>hoopR</code>, but raw data can also be scraped or downloaded manually from their statistics pages.</p></li>
<li><p><strong>Kaggle.com</strong>: A platform hosting user-contributed datasets, many of which are sports-related. Search for “sports analytics” to find datasets like the PGA golf data from Section 4 or cricket match records from Section 5. These datasets are often in CSV format and accompanied by descriptions of variables.</p></li>
</ul>
<p>When working with external data, ensure it aligns with the tidy data principles we’ve used: each row should represent an observation (e.g., a game or player-season), and each column a variable.</p>
</section><section id="what-to-look-for-in-a-sports-dataset" class="level2" data-number="7.3"><h2 data-number="7.3" class="anchored" data-anchor-id="what-to-look-for-in-a-sports-dataset">
<span class="header-section-number">7.3</span> What to Look for in a Sports Dataset</h2>
<p>Selecting an appropriate dataset is crucial for conducting meaningful sports analytics. As you explore available data, consider the following characteristics to ensure it meets your analytical needs:</p>
<ol type="1">
<li><p><strong>Response Variable</strong>: The response variable is the outcome you aim to analyze or predict. For example, in Sections 1 and 4, we used continuous responses like batting average (<code>BA</code>) and FedEx Cup points (<code>Points</code>), while in Section 5, we modeled a binary response (<code>Result</code>, win/loss). Identify a clear response that aligns with your research question—whether it’s a player’s performance metric, a team’s win probability, or a game score.</p></li>
<li><p><strong>Predictor Variables (Features)</strong>: These are the explanatory variables that influence the response. Look for datasets with a mix of numeric predictors (e.g., <code>minutes</code>, <code>avgDriveDist</code>) and categorical predictors (e.g., <code>teamID</code>, <code>court</code>). In Section 1, we used <code>H</code> (hits) and <code>AB</code> (at-bats) to compute batting averages, while in Section 6, <code>minutes</code> was a fixed effect predictor. Ensure the dataset includes features relevant to your hypothesis, such as player stats, game conditions, or team attributes.</p></li>
<li><p><strong>Number of Observations</strong>: The sample size affects the reliability of your analysis. A dataset with too few observations (e.g., &lt; 30) may limit statistical power, while one with thousands (like <code>nba_data</code> from <code>hoopR</code>) offers robust insights. The <code>PGA2022.csv</code> dataset in Section 4 had 1,387 cases, sufficient for exploring golfer performance across tournaments. Aim for a balance: enough data to detect patterns but manageable for initial exploration.</p></li>
<li><p><strong>Data Quality</strong>: Check for missing values, inconsistencies, or errors. In Section 4, we used <code>step_naomit()</code> to remove rows with missing data in the PGA dataset. Assess the dataset’s completeness—variables like <code>points</code> or <code>Run.Scored</code> should have minimal gaps. Also, verify that the data is well-documented, with clear definitions for each column (e.g., <code>driveSG</code> as strokes gained off the tee).</p></li>
<li><p><strong>Hierarchical Structure</strong>: For mixed effects models (Section 6), seek datasets with clustering, such as players within teams or games within seasons. The <code>nba_data</code> from <code>hoopR</code> includes <code>athlete_id</code> and <code>team_name</code>, enabling random effects for players or teams. Similarly, the <code>cricket_asia_cup.csv</code> dataset in Section 5 groups matches by <code>Year</code> and <code>Team</code>.</p></li>
<li><p><strong>Temporal or Spatial Context</strong>: Sports data often includes a time dimension (e.g., <code>yearID</code> in <code>Lahman</code>) or location. These variables allow you to explore trends over time or differences across settings, as we did with Paul George’s free throw percentages by month in Section 2.</p></li>
</ol>
<p>Obtaining sports data is both an art and a science. Packages like <code>hoopR</code> and <code>Lahman</code> provide ready-to-use datasets, while websites like Basketball-Reference and Kaggle offer flexibility for custom analyses. As you select a dataset, prioritize a clear response variable, relevant predictors, and sufficient observations, keeping an eye on data quality and structure.</p>


</section></main><!-- /main --><script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./06_Mixed.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Mixed Effects Models</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./08_Web.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Web Scraping with Rvest</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">STA 3311</div>
  </div>
</footer>


</body></html>